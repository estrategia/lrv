function alerta(a){$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})}function animarRelacionado(){$("html, body").animate({scrollTop:0},600),$("#link-relacionados-agregar").css("opacity",""),intervalRelacionados=setInterval(function(){$("#link-relacionados-agregar").animate({opacity:"0.5"},400,function(){$("#link-relacionados-agregar").animate({opacity:"1"},400)})},1e3),$("#link-relacionados-agregar").css("display",""),setTimeout(function(){null!=intervalRelacionados&&(clearInterval(intervalRelacionados),intervalRelacionados=null),$("#link-relacionados-agregar").css("opacity","")},1e4)}function quitarRelacionado(){null!=intervalRelacionados&&(clearInterval(intervalRelacionados),intervalRelacionados=null),$("#link-relacionados-agregar").css("display","none"),$("#link-relacionados-agregar").css("opacity",""),$("#link-relacionados-agregar").attr("href","#")}function ubicacionGPS(){navigator.geolocation?($.mobile.loading("show"),navigator.geolocation.getCurrentPosition(obtenerPosicion,errorPosicion,{enableHighAccuracy:!0,timeout:3e4,maximumAge:0})):alert("Servicio no soportado por este navegador.")}function obtenerPosicion(a){var e=0,o=0;a&&(e=a.coords.latitude,o=a.coords.longitude),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/sitio/gps",data:{entrega:$('input[id="ubicacion-seleccion-entrega"]').val().trim(),lat:e,lon:o},success:function(a){"ok"==a.result?($("#popup-ubicacion-gps [data-role='content']").html(a.response),$("#popup-ubicacion-gps").popup("open")):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"}),$.mobile.loading("hide")},error:function(a,e,o){$.mobile.loading("hide"),alert("Error: "+o)}})}function errorPosicion(a){$.mobile.loading("hide");var e="NA";switch(a.code){case a.PERMISSION_DENIED:e="Por favor activar/habilitar servicio de ubicación de tu dispositivo.";break;case a.POSITION_UNAVAILABLE:e="Posición no disponible.";break;case a.TIMEOUT:e="Expiró el tiempo de espera.";break;case a.UNKNOWN_ERROR:e="Error desconocido: "+erro.message}alert(e)}function subtotalUnidadProducto(a){var e=$("#cantidad-producto-unidad-"+a).val();e=parseInt(e),isNaN(e)&&(e=1),1>=e&&(e=1),$("#cantidad-producto-unidad-"+a).val(e),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/catalogo/subtotalUnidad",data:{codigo:a,cantidad:e},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(e){"ok"==e.result?$("#subtotal-producto-unidad-"+a).html(e.response.valorFormato):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+e.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){alert("Error: "+o)}})}function subtotalParcialProductoFraccion(a,e,o){var i=parseInt($("#cantidad-producto-fraccion-"+a).val());isNaN(i)&&(i=0),0>i&&(i=0),$("#cantidad-producto-fraccion-"+a).val(i);var t=Math.floor(e/o),r=$("#cantidad-producto-unidad-"+a).val();if(r=parseInt(r),isNaN(r)&&(r=0),0>r&&(r=0),i>=t){var n=Math.floor(i/t),c=i%t;r+=n,i=c}$("#cantidad-producto-unidad-"+a).val(r),$("#cantidad-producto-fraccion-"+a).val(i),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/catalogo/subtotalFraccion",data:{codigo:a,cantidadUnidad:r,cantidadFraccion:i},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(e){"ok"==e.result?($("#subtotal-producto-unidad-"+a).html(e.response.valorUnidadFormato),$("#subtotal-producto-fraccion-"+a).html(e.response.valorFraccionFormato),$("#total-producto-"+a).html(e.response.valorTotalFormato)):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+e.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){alert("Error: "+o)}})}function subtotalProductoBodega(a){var e=parseInt($("#cantidad-producto-ubicacion-"+a).val());isNaN(e)&&(e=0),0>e&&(e=0);var o=$("#cantidad-producto-bodega-"+a).val();o=parseInt(o),isNaN(o)&&(o=0),0>o&&(o=0),$("#cantidad-producto-ubicacion-"+a).val(e),$("#cantidad-producto-bodega-"+a).val(o),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/catalogo/subtotalBodega",data:{codigo:a,bodega:o,ubicacion:e},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(e){"ok"==e.result?($("#subtotal-producto-bodega-"+a).html(e.response.valorBodegaFormato),$("#subtotal-producto-ubicacion-"+a).html(e.response.valorUbicacionFormato),$("#total-producto-"+a).html(e.response.valorTotalFormato)):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+e.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){alert("Error: "+o)}})}function subtotalCombo(a){var e=$("#cantidad-combo-"+a).val();e=parseInt(e),isNaN(e)&&(e=1),1>=e&&(e=1),$("#cantidad-combo-"+a).val(e),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/catalogo/subtotalCombo",data:{codigo:a,cantidad:e},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(e){"ok"==e.result?$("#subtotal-combo-"+a).html(e.response.valorFormato):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+e.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){alert("Error: "+o)}})}function subtotalProductoCarro(a){var e=$("#cantidad-producto-"+a).val();e=parseInt(e),isNaN(e)&&(e=1),1>=e&&(e=1),$("#cantidad-producto-"+a).val(e),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/modificar",data:{id:a,cantidad:e},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){"ok"==a.result?($("#div-carro").html(a.carro),$("#div-carro").trigger("create"),$("#panel-carro-canasta").html(a.canasta),$("#panel-carro-canasta").trigger("create")):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){alert("Error: "+o)}})}function ratyclic(a,e){alert("ID ratyclik: "+this.id+"\nscore: "+a+"\nevent: "+e.type)}function recalcularFiltros(a){var e={};$("input[id^='FiltroForm_listMarcas_']").each(function(){$(this).is(":checked")&&(e[$(this).val()]=parseInt($(this).val()))});var o={};$("input[id^='FiltroForm_listFiltros_']").each(function(){$(this).is(":checked")&&(o[$(this).val()]=parseInt($(this).attr("data-filtro")))}),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/catalogo/filtro",data:{marcas:e,atributos:o,tipo:a},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){a.hasOwnProperty("marcas")&&($("#div-filtro-marcas").html(a.marcas),$("#div-filtro-marcas").trigger("create")),a.hasOwnProperty("atributos")&&($("#div-filtro-atributos").html(a.atributos),$("#div-filtro-atributos").trigger("create"))},error:function(a,e,o){alert("Error: "+o)}})}function verUbicacion(){"0"==$("#ubicacion-info").attr("data-active")?($("#ubicacion-info").removeClass("hide"),$("#ubicacion-info").addClass("display"),$("#ubicacion-info").attr("data-active","1")):($("#ubicacion-info").removeClass("display"),$("#ubicacion-info").addClass("hide"),$("#ubicacion-info").attr("data-active","0"))}function pasoDespacho(a,e,o){var i={siguiente:e,direccion:$('input[name="FormaPagoForm[idDireccionDespacho]"]:checked').val()};$.ajax({type:"POST",async:!0,url:requestUrl+"/carro/pagar/paso/"+a+"/post/true",data:$.param(i)+"&"+$("#form-direccion-pagoinvitado").serialize(),beforeSend:function(){o.button("disable"),$('div[id^="FormaPagoForm_"].has-error').html(""),$('div[id^="FormaPagoForm_"].has-error').css("display","none"),$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){var e=$.parseJSON(a);"ok"===e.result?window.location.replace(e.redirect):"error"===e.result?(alerta(e.response),o.button("enable")):($.each(e,function(a,e){$("#"+a+"_em_").html(e),$("#"+a+"_em_").css("display","block")}),o.button("enable"))},error:function(a,e,i){alert("Error: "+i),o.button("enable")}})}function pasoEntrega(a,e,o){var i={siguiente:e};$.ajax({type:"POST",async:!0,url:requestUrl+"/carro/pagar/paso/"+a+"/post/true",data:$.param(i)+"&"+$("#form-pago-entrega").serialize(),beforeSend:function(){o.button("disable"),$('div[id^="FormaPagoForm_"].has-error').html(""),$('div[id^="FormaPagoForm_"].has-error').css("display","none"),$("#form-pago-entrega").trigger("create"),$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){var e=$.parseJSON(a);"ok"===e.result?window.location.replace(e.redirect):"error"===e.result?(alerta(e.response),o.button("enable")):($.each(e,function(a,e){$("#"+a+"_em_").html(e),$("#"+a+"_em_").css("display","block")}),o.button("enable"))},error:function(a,e,i){alert("Error: "+i),o.button("enable")}})}function pasoPago(a,e,o){var i={siguiente:e};$.ajax({type:"POST",async:!0,url:requestUrl+"/carro/pagar/paso/"+a+"/post/true",data:$.param(i)+"&"+$("#form-pago-pago").serialize(),beforeSend:function(){o.button("disable"),$('div[id^="FormaPagoForm_"].has-error').html(""),$('div[id^="FormaPagoForm_"].has-error').css("display","none"),$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){var e=$.parseJSON(a);"ok"===e.result?window.location.replace(e.redirect):"error"===e.result?(alerta(e.response),o.button("enable")):($.each(e,function(a,e){$("#"+a+"_em_").html(e),$("#"+a+"_em_").css("display","block")}),o.button("enable"))},error:function(a,e,i){alert("Error: "+i),o.button("enable")}})}function pasoConfirmacion(a,e,o){var i={siguiente:e};$.ajax({type:"POST",async:!0,url:requestUrl+"/carro/pagar/paso/"+a+"/post/true",data:$.param(i)+"&"+$("#form-pago-confirmacion").serialize(),beforeSend:function(){o.button("disable"),$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){var e=$.parseJSON(a);"ok"===e.result?window.location.replace(e.redirect):"error"===e.result?(alerta(e.response),o.button("enable")):($.each(e,function(a,e){$("#"+a+"_em_").html(e),$("#"+a+"_em_").css("display","block")}),o.button("enable"))},error:function(a,e,i){alert("Error: "+i),o.button("enable")}})}function pagoCredirebaja(a,e){if($(a).length){var o=$('input[name="'+e+'[idFormaPago]"]:checked').val();void 0==o||0==$("#"+e+"_idFormaPago_"+o).attr("data-credirebaja")?($('[id="div-credirebaja"] input').attr("disabled","disabled"),$('[id="div-credirebaja"] select').attr("disabled","disabled"),$("#div-credirebaja").css("display","none")):($('[id="div-credirebaja"] input').removeAttr("disabled"),$('[id="div-credirebaja"] select').removeAttr("disabled"),$("#div-credirebaja").css("display","block"))}}function colapseDireccion(){if($("#form-pagoexpess").length){var a=$('input[name="PagoExpress[idDireccionDespacho]"]:checked').val();$("div[id^=div-infodireccion-]").css("display","none"),void 0!==a&&$("#div-infodireccion-"+a).css("display","block")}}intervalRelacionados=null,$(document).on("click",'a[data-role="ubicacion-gps-seleccion"]',function(){$("#ubicacion-seleccion-ciudad").val($(this).attr("data-ciudad")),$("#ubicacion-seleccion-sector").val($(this).attr("data-sector")),$("#ubicacion-seleccion-direccion").val(""),$("#popup-ubicacion-gps").popup("close"),$("#popup-ubicacion-gps [data-role='content']").html("")}),$(document).on("click",'a[data-role="ubicacion-seleccion-mapa"]',function(){var a=0,e=0;map&&(a=map.getCenter().lat(),e=map.getCenter().lng()),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/sitio/gps",data:{lat:a,lon:e},beforeSend:function(){$.mobile.loading("show")},success:function(a){"ok"==a.result?($("#page-ubicacion-map").dialog("close"),$("#ubicacion-seleccion-ciudad").val(a.response.ciudad),$("#ubicacion-seleccion-sector").val(a.response.sector),$("#ubicacion-seleccion-direccion").val("")):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"}),$.mobile.loading("hide")},error:function(a,e,o){$.mobile.loading("hide"),alert(o)}})}),$(document).on("click",'a[data-role="ubicacion-seleccion"]',function(){var a=$(this).parents("form");return $.ajax({type:"POST",async:!0,url:requestUrl+"/sitio/ubicacionSeleccion",data:a.serialize(),dataType:"json",beforeSend:function(){$.mobile.loading("show")},complete:function(a){$.mobile.loading("hide")},success:function(a){"ok"==a.result?(dialogoAnimado(a.response),a.urlAnterior?location.href=a.urlAnterior:location.href=requestUrl+"/sitio/inicio"):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){$.mobile.loading("hide"),alert(o)}}),!1}),$(document).on("change",'select[data-role="ciudad-despacho-map"]',function(){var a=$(this).val().trim();if(a.length>0){var e=$('select[data-role="ciudad-despacho-map"] option[value="'+a+'"]').attr("selected","selected");map&&(map.setCenter(new google.maps.LatLng(parseFloat(e.attr("data-latitud")),parseFloat(e.attr("data-longitud")))),map.setZoom(15),$("#select-ubicacion-preferencia").remove(),$("#select-ubicacion-psubsector").removeClass("div-center").addClass("float-left"),$.ajax({type:"POST",async:!0,url:requestUrl+"/sitio/ubicacionSeleccion",data:{ciudad:a},dataType:"html",beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){a.length>0?($("#select-ubicacion-content").append(a),$("#select-ubicacion-content").trigger("create")):$("#select-ubicacion-psubsector").removeClass("float-left").addClass("div-center")},error:function(a,e,o){$.mobile.loading("hide"),alert("Error: "+o)}}))}}),$(document).on("change",'select[data-role="sector-despacho-map"]',function(){var a=$(this).val().trim();if(a.length>0){var e=$('select[data-role="sector-despacho-map"] option[value="'+a+'"]').attr("selected","selected");map&&(map.setCenter(new google.maps.LatLng(parseFloat(e.attr("data-latitud")),parseFloat(e.attr("data-longitud")))),map.setZoom(15))}}),$(document).on("click",'button[data-role="ubicacion-mapa"]',function(){return $("#page-ubicacion-map").length>0?($.mobile.changePage("#page-ubicacion-map",{transition:"pop",role:"dialog",reverse:!1}),resizeMap()):$.ajax({type:"POST",dataType:"html",async:!0,url:requestUrl+"/sitio/mapa",beforeSend:function(){$.mobile.loading("show")},success:function(a){$.getScript("https://maps.googleapis.com/maps/api/js?key="+gmapKey).done(function(e,o){$.getScript(requestUrl+"/js/ubicacion.min.js").done(function(e,o){$("body").append(a),inicializarMapa(),$.mobile.changePage("#page-ubicacion-map",{transition:"pop",role:"dialog",reverse:!1}),resizeMap(),$.mobile.loading("hide")}).fail(function(a,e,o){$.mobile.loading("hide"),alert("Error al inicializar mapa: "+o)})}).fail(function(a,e,o){$.mobile.loading("hide"),alert("Error al cargar mapa: "+o)})},error:function(a,e,o){$.mobile.loading("hide"),alert("Error: "+o)}}),!1}),$(document).on("click",'button[data-role="ubicacion-direccion"]',function(){return $.ajax({type:"GET",async:!0,url:requestUrl+"/usuario/direccionesUbicacion",dataType:"html",beforeSend:function(){$("div[id='page-direccionesubicacion']").remove(),$.mobile.loading("show")},complete:function(a){$.mobile.loading("hide")},success:function(a){$("body").append(a),$.mobile.changePage("#page-direccionesubicacion",{transition:"pop",role:"dialog",reverse:!1})},error:function(a,e,o){Loading.hide(),bootbox.alert("Error: "+o)}}),!1}),$(document).on("click","a[data-ubicacion='verificacion-domicilio']",function(){$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/sitio/ubicacionVerificacion",data:{ciudad:$(this).attr("data-ciudad"),sector:$(this).attr("data-sector")},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){"ok"==a.result?a.response.domicilio?window.location.replace(a.response.url):($("#popup-ubicacion-gps [data-role='content'] div").html(a.response.mensaje),$("#popup-ubicacion-gps [data-role='content'] a").attr("href",a.response.url),$("#popup-ubicacion-gps").popup("open")):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){$.mobile.loading("hide"),alert("Error: "+o)}})}),$(document).on("click","a[data-eliminar='1'], a[data-eliminar='2'], a[data-eliminar='3']",function(){var a=$(this).attr("data-position"),e=$(this).attr("data-eliminar");$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/eliminar",data:{id:a,eliminar:e},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){"ok"==a.result?($("#div-carro").html(a.carro),$("#div-carro").trigger("create"),$("#panel-carro-canasta").html(a.canasta),$("#panel-carro-canasta").trigger("create")):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){alert("Error: "+o)}})}),$(document).on("click","a[data-role='carrovaciar']",function(){$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/vaciar",beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){"ok"==a.result?($("#div-carro").html(a.carro),$("#div-carro").trigger("create"),$("#panel-carro-canasta").html(a.canasta),$("#panel-carro-canasta").trigger("create")):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){alert("Error: "+o)}})}),$(document).on("pagecreate",function(a){$(function(){$(window).scroll(function(){$(this).scrollTop()>100?$("a.scroll-top").fadeIn():$("a.scroll-top").fadeOut()}),$("a.scroll-top").click(function(){return $("html, body").animate({scrollTop:0},600),!1})}),$("[data-role='raty']").raty({starOn:requestUrl+"/libs/raty/images/star-on.png",starOff:requestUrl+"/libs/raty/images/star-off.png",starHalf:requestUrl+"/libs/raty/images/star-half.png",cancelOn:requestUrl+"/libs/raty/images/cancel-on.png",cancelOff:requestUrl+"/libs/raty/images/cancel-off.png",hints:["mala","deficiente","regular","buena","excelente"],noRatedMsg:"Sin calificación",readOnly:function(){return"true"===$(this).attr("data-readonly")},click:function(a,e){if($(this).attr("data-callback")){var o=$(this).attr("data-callback");window[o](a,e)}},score:function(){return $(this).attr("data-score")}}),$("[id^='owl-productodetalle-']").owlCarousel({navigation:!1,slideSpeed:300,paginationSpeed:400,singleItem:!0,autoPlay:1e4}),$("[id^='slide-relacionados']").owlCarousel({slideSpeed:300,paginationSpeed:400,autoPlay:3e3,items:4,itemsDesktop:[1e3,5],itemsDesktopSmall:[900,3],itemsTablet:[600,2],itemsMobile:[300,2]}),$("[id^='slide-imagenes']").owlCarousel({autoPlay:3e3,items:4,itemsDesktop:[1199,3],itemsDesktopSmall:[979,3]}),pagoCredirebaja("#form-pago-pago","FormaPagoForm"),pagoCredirebaja("#form-pagoexpess","PagoExpress"),colapseDireccion(),$(function(){var a=$("textarea[data-countchar]");a.length&&countChar(a,a.attr("data-countchar"))}),$("div[id^='collapsible-direccion-ciudad-']").on("collapsiblecollapse",function(a,e){$("div[id^='div-direccion-form-']").css("display","none"),$("input[id^='DireccionesDespacho_idDireccionDespacho_']").removeAttr("checked"),$("input[id^='DireccionesDespacho_idDireccionDespacho_']").checkboxradio("refresh")})}),$(document).on("click","button[data-role='calificacion']",function(){var a=$(this).attr("data-producto"),e=$("#calificacion-titulo-"+a),o=$("#calificacion-comentario-"+a),i=$("#calificacion-raty-"+a).raty("score");return i=parseInt(i),isNaN(i)&&(i=0),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/catalogo/calificar",data:{codigo:a.trim(),titulo:e.val().trim(),comentario:o.val().trim(),calificacion:i},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(e){"ok"===e.result?($("[data-role='calificacion']").remove(),$("#calificacion-raty-"+a).raty("readOnly",!0),$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+e.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+e.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){alert("Error: "+o)}}),!1}),$(document).on("change","input[id^='FiltroForm_listMarcas_']",function(){recalcularFiltros(1)}),$(document).on("change","input[id^='FiltroForm_listFiltros_']",function(){recalcularFiltros(2)}),$(document).on("click","a[data-cargar='1']",function(){var a=$(this).attr("data-producto"),e=$("#cantidad-producto-unidad-"+a).val();e=parseInt(e),isNaN(e)&&(e=-1);var o=parseInt($("#cantidad-producto-fraccion-"+a).val());o=parseInt(o),isNaN(o)&&(o=-1),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/agregar",data:{producto:a,cantidadU:e,cantidadF:o},beforeSend:function(){quitarRelacionado(),$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(e){"ok"===e.result?($("#panel-carro-canasta").html(e.response.canastaHTML),$("#panel-carro-canasta").trigger("create"),e.response.mensajeHTML&&(dialogoAnimado(e.response.mensajeHTML),$("#icono-producto-agregado-"+a).addClass("active")),e.response.dialogoHTML&&$("<div>").mdialog({content:e.response.dialogoHTML}),e.response.relacionados&&$("#link-relacionados-agregar").length>0&&($("#link-relacionados-agregar").attr("href",requestUrl+"/catalogo/relacionados/producto/"+a),animarRelacionado())):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+e.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){alert("Error: "+o)}})}),$(document).on("click","a[data-cargar='2']",function(){var a=$(this).attr("data-combo"),e=$("#cantidad-combo-"+a).val();e=parseInt(e),isNaN(e)&&(e=0),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/agregarCombo",data:{combo:a,cantidad:e},beforeSend:function(){$.mobile.loading("show"),quitarRelacionado()},complete:function(){$.mobile.loading("hide")},success:function(e){"ok"===e.result?($("#panel-carro-canasta").html(e.response.canastaHTML),$("#panel-carro-canasta").trigger("create"),e.response.mensajeHTML&&(dialogoAnimado(e.response.mensajeHTML),$("#icono-combo-agregado-"+a).addClass("active")),e.response.dialogoHTML&&$("<div>").mdialog({content:e.response.dialogoHTML})):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+e.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){alert("Error: "+o)}})}),$(document).on("click","a[data-cargar='3']",function(){var a=$(this).attr("data-producto"),e=$("#cantidad-producto-ubicacion-"+a).val();e=parseInt(e),isNaN(e)&&(e=0);var o=parseInt($("#cantidad-producto-bodega-"+a).val());o=parseInt(o),isNaN(o)&&(o=0),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/agregarBodega",data:{producto:a,cantidadU:e,cantidadB:o},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){"ok"===a.result?($("#panel-carro-canasta").html(a.response.canastaHTML),$("#panel-carro-canasta").trigger("create"),a.response.mensajeHTML&&dialogoAnimado(a.response.mensajeHTML),a.response.dialogoHTML&&$("<div>").mdialog({content:a.response.dialogoHTML})):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){alert("Error: "+o)}})}),$(document).on("change","input[data-modificar='1'], input[data-modificar='2'], input[data-modificar='3']",function(){var a=$(this).attr("data-position"),e=$(this).attr("data-modificar"),o={modificar:e,position:a};if(1==e){var i=parseInt($("#cantidad-producto-fraccion-"+a).val());isNaN(i)?i=-1:1>i&&(i=1);var t=parseInt($("#cantidad-producto-unidad-"+a).val());if((isNaN(t)||1>t)&&(t=1),i>0){var r=parseInt($(this).attr("data-nfracciones")),n=parseInt($(this).attr("data-ufraccionamiento")),c=Math.floor(r/n);if(i>=c){var l=Math.floor(i/c),s=i%c;t+=l,i=s}}o.cantidadU=t,o.cantidadF=i}else if(2==e){var d=parseInt($("#cantidad-producto-"+a).val());(isNaN(d)||1>d)&&(d=1),o.cantidad=d}else if(3==e){var d=parseInt($("#cantidad-producto-bodega-"+a).val());(isNaN(d)||1>d)&&(d=1),o.cantidad=d}$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/modificar",data:o,beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){"ok"===a.result?($("#div-carro").html(a.response.carroHTML),$("#div-carro").trigger("create"),a.response.canastaHTML&&($("#panel-carro-canasta").html(a.response.canastaHTML),$("#panel-carro-canasta").trigger("create")),a.response.mensajeHTML&&dialogoAnimado(a.response.mensajeHTML),a.response.dialogoHTML&&$("<div>").mdialog({content:a.response.dialogoHTML})):($("#div-carro").html(a.response.carroHTML),$("#div-carro").trigger("create"),$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response.message+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"}))},error:function(a,e,o){alert("Error: "+o)}})}),$(document).on("change",'input[name="DireccionesDespacho[idDireccionDespacho]"]:radio',function(a){var e=$('input[name="DireccionesDespacho[idDireccionDespacho]"]:checked').val();$("div[id^='div-direccion-form-']").css("display","none"),$("#div-direccion-form-"+e).css("display","block"),$("html,body").animate({scrollTop:$("#div-direccion-form-"+e).offset().top},200),$('form[id="form-ubicacion"]').length>0&&($("#ubicacion-seleccion-ciudad").val(""),$("#ubicacion-seleccion-sector").val(""),$("#ubicacion-seleccion-direccion").val($(this).val()))}),$(document).on("click","input[id^='btn-direccion-actualizar-']",function(){var a=$(this).parents("form");return $.ajax({type:"POST",async:!0,url:requestUrl+"/usuario/direccionActualizar",data:a.serialize(),beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(e){var o=$.parseJSON(e);"ok"===o.result||("error"===o.result?alert(o.response):$.each(o,function(e,o){$("#"+a.attr("id")+" #"+e+"_em_").html(o),$("#"+a.attr("id")+" #"+e+"_em_").css("display","block")}))},error:function(a,e,o){alert("Error: "+o)}}),!1}),$(document).on("click","a[data-role='direccion-adicionar-modal']",function(){$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/usuario/direccionCrear",data:{render:!0},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){var e="page-direccion-crear-"+uniqueId(),o="<div data-role='page' id='"+e+"'><div data-role='main' class='ui-content'>"+a.response.dialogoHTML+"<a href='#' class='ui-btn ui-btn-n ui-corner-all ui-shadow' data-rel='back'>Cerrar</a></div></div>";$("body").append(o),$.mobile.changePage("#"+e,{transition:"pop",role:"dialog",reverse:!1})},error:function(a,e,o){$.mobile.loading("hide"),alert("Error: "+o)}})}),$(document).on("click","input[data-role='direccion-adicionar']",function(){var a=$(this).parents("form"),e=$(this).attr("data-modal"),o={modal:e};return $.ajax({type:"POST",async:!0,url:requestUrl+"/usuario/direccionCrear",data:$.param(o)+"&"+a.serialize(),beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(o){var o=$.parseJSON(o);"ok"===o.result?1==e?($("#div-direcciones-lista").html(o.response.direccionesHTML),$("#div-direcciones-lista").trigger("create"),$("div[id^='page-direccion-crear-']").dialog("close"),dialogoAnimado(o.response.mensaje)):location.reload():"error"===o.result?$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+o.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"}):$.each(o,function(e,o){$("#"+a.attr("id")+" #"+e+"_em_").html(o),$("#"+a.attr("id")+" #"+e+"_em_").css("display","block")})},error:function(a,e,o){alert("Error: "+o)}}),!1}),$(document).on("click","input[id^='btn-direccion-eliminar-']",function(){var a=$(this).attr("data-direccion");return $.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/usuario/direccionEliminar",data:{direccion:a},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(e){"ok"===e.result?$("#div-direccion-radio-"+a).remove():"error"===e.result&&$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+e.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){alert("Error: "+o)}}),!1}),$(document).on("click","input[id='btn-carropagar-siguiente'], input[id='btn-carropagar-anterior']",function(){var a=$(this).attr("data-origin"),e=$(this).attr("data-redirect");return"despacho"===a?pasoDespacho(a,e,$(this)):"entrega"===a?pasoEntrega(a,e,$(this)):"pago"===a?pasoPago(a,e,$(this)):"confirmacion"===a&&pasoConfirmacion(a,e,$(this)),!1}),$(document).on("change",'input[name="FormaPagoForm[idFormaPago]"]:radio',function(a){pagoCredirebaja("#form-pago-pago","FormaPagoForm")}),$(document).on("change",'input[name="PagoExpress[idFormaPago]"]:radio',function(a){pagoCredirebaja("#form-pagoexpess","PagoExpress"),$("#PagoExpress_idFormaPago_em_").html("")}),$(document).on("change",'input[name="PagoExpress[idDireccionDespacho]"]:radio',function(a){colapseDireccion(),$("#PagoExpress_idDireccionDespacho_em_").html("")}),$(document).on("change","#FormaPagoForm_numeroTarjeta",function(){var a=$(this).val();a=parseInt(a),isNaN(a)&&$(this).val("")}),$(document).on("click","a[data-role='pedidodetalle']",function(){var a=$(this).attr("data-compra");$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/agregarcompra",data:{compra:a},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){"ok"===a.result?($("#panel-carro-canasta").html(a.response.canastaHTML),$("#panel-carro-canasta").trigger("create"),a.response.mensajeHTML&&dialogoAnimado(a.response.mensajeHTML),a.response.dialogoHTML&&$("<div>").mdialog({
content:a.response.dialogoHTML})):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){$.mobile.loading("hide"),alert("Error: "+o)}})}),$(document).on("click","a[data-role='cotizaciondetalle']",function(){var a=$(this).attr("data-cotizacion");$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/agregarcotizacion",data:{cotizacion:a},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){"ok"===a.result?($("#panel-carro-canasta").html(a.response.canastaHTML),$("#panel-carro-canasta").trigger("create"),a.response.mensajeHTML&&dialogoAnimado(a.response.mensajeHTML),a.response.dialogoHTML&&$("<div>").mdialog({content:a.response.dialogoHTML})):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){$.mobile.loading("hide"),alert("Error: "+o)}})}),$(document).on("click","a[data-role='pedidolistaocultar']",function(){var a=$(this).attr("data-compra");$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/usuario/ocultarpedido",data:{compra:a},beforeSend:function(){$.mobile.loading("show")},success:function(a){"ok"===a.result?($.fn.yiiGridView.update("grid-cuenta-listapedidos"),$.mobile.loading("hide")):($.mobile.loading("hide"),$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"}))},error:function(a,e,o){$.mobile.loading("hide"),alert("Error: "+o)}})}),$(document).on("click","a[data-role='pedidogridestado']",function(){$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+$(this).attr("data-estado")+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})}),$(document).on("click","a[data-role='listapersonal']",function(){var a=$(this).attr("data-lista");$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/agregarlista",data:{lista:a},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){"ok"===a.result?($("#panel-carro-canasta").html(a.response.canastaHTML),$("#panel-carro-canasta").trigger("create"),a.response.mensajeHTML&&dialogoAnimado(a.response.mensajeHTML),a.response.dialogoHTML&&$("<div>").mdialog({content:a.response.dialogoHTML})):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){$.mobile.loading("hide"),alert("Error: "+o)}})}),$(document).on("click","input[data-role='lstpersonalform']",function(){var a={},e=$(this).attr("data-lista");void 0!==e&&(a.lista=e),$.ajax({type:"POST",async:!0,url:requestUrl+"/usuario/listapersonal/lista/post",data:$.param(a)+"&"+$("#form-listapersonal").serialize(),beforeSend:function(){$('div[id^="ListasPersonales_"].has-error').html(""),$('div[id^="ListasPersonales_"].has-error').css("display","none"),$("#form-listapersonal input[type=button]").attr("disabled","disabled"),$.mobile.loading("show")},complete:function(){$.mobile.loading("hide"),$("#form-listapersonal input[type=button]").removeAttr("disabled")},success:function(a){var a=$.parseJSON(a);"ok"===a.result?($("#ListaGuardarForm_idLista").length&&$("#ListaGuardarForm_idLista").append(a.response.optionHtml),$("#gridview-listapersonal").length&&($("#form-listapersonal")[0].reset(),$.fn.yiiGridView.update("gridview-listapersonal")),$(".ui-collapsible").collapsible("collapse"),dialogoAnimado(a.response.mensajeHtml)):"error"===a.result?$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"}):$.each(a,function(a,e){$("#"+a+"_em_").html(e),$("#"+a+"_em_").css("display","block")})},error:function(a,e,o){$.mobile.loading("hide"),alert("Error: "+o)}})}),$(document).on("change","input[data-role='actualizarlistadetalle']",function(){var a=$(this).attr("data-detalle"),e=$(this).val();e=parseInt(e),isNaN(e)&&(e=0),0>=e&&(e=0),$(this).val(e),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/usuario/listadetalle/accion/actualizar",data:{detalle:a,unidades:e},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){"ok"===a.result?($("#div-listadetalle").html(a.response.detalleHTML),$("#div-listadetalle").trigger("create"),dialogoAnimado(a.response.mensajeHTML)):"error"===a.result&&$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){$.mobile.loading("hide"),alert("Error: "+o)}})}),$(document).on("click","a[data-role='eliminarlistadetalle']",function(){var a=$(this).attr("data-detalle");$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/usuario/listadetalle/accion/eliminar",data:{detalle:a},beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){"ok"===a.result?($("#div-listadetalle").html(a.response.detalleHTML),$("#div-listadetalle").trigger("create"),dialogoAnimado(a.response.mensajeHTML)):"error"===a.result&&$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){$.mobile.loading("hide"),alert("Error: "+o)}})}),$(document).on("click","a[data-role='lstpersonalguardar']",function(){var a=$(this).attr("data-tipo");a=parseInt(a),isNaN(a)&&(a=-1);var e=$(this).attr("data-codigo"),o=0;1===a?(o=$("#cantidad-producto-unidad-"+e).val(),o=parseInt(o),isNaN(o)&&(o=0)):2===a&&(o=$("#cantidad-combo-"+e).val(),o=parseInt(o),isNaN(o)&&(o=0)),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/usuario/listapersonal/lista/guardar",data:{codigo:e,tipo:a,unidades:o,render:!0},beforeSend:function(){$("div[id^='page-listaguardar-']").remove(),$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){if("ok"===a.result){var e="page-listaguardar-"+uniqueId(),o="<div data-role='page' id='"+e+"'><div data-role='main' class='ui-content'>"+a.response.dialogoHTML+"<a href='#' class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back'>Cerrar</a></div></div>";$("body").append(o),$.mobile.changePage("#"+e,{transition:"pop",role:"dialog",reverse:!1})}else"error"===a.result&&$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){$.mobile.loading("hide"),alert("Error: "+o)}})}),$(document).on("click","input[data-role='lstpersonalguardar']",function(){$.ajax({type:"POST",async:!0,url:requestUrl+"/usuario/listapersonal/lista/guardar",data:$("#form-listaguardar").serialize(),beforeSend:function(){$('div[id^="ListaGuardarForm_"].has-error').html(""),$('div[id^="ListaGuardarForm_"].has-error').css("display","none"),$("#form-listaguardar input[type=button]").attr("disabled","disabled"),$.mobile.loading("show")},complete:function(){$.mobile.loading("hide"),$("#form-listaguardar input[type=button]").removeAttr("disabled")},success:function(a){var a=$.parseJSON(a);"ok"===a.result?($("div[id^='page-listaguardar-']").dialog("close"),dialogoAnimado(a.response)):"error"===a.result?$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"}):$.each(a,function(a,e){$("#"+a+"_em_").html(e),$("#"+a+"_em_").css("display","block")})},error:function(a,e,o){$.mobile.loading("hide"),alert("Error: "+o)}})}),$(document).on("click","a[data-role='cambioubicacion']",function(){$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/vacio",data:$("#form-listaguardar").serialize(),beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){"ok"==a.result?a.response?window.location.replace(requestUrl+"/sitio/ubicacion"):$("#popup-cambioubicacion").popup("open"):$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){$.mobile.loading("hide"),alert("Error: "+o)}})}),$(document).on("keyup","input[type='number']",function(){var a=-1;$(this).attr("maxlength")&&(a=parseInt($(this).attr("maxlength")),isNaN(a)&&(a=-1)),$(this).val().length>0?a>0&&$(this).val().length>a&&$(this).val($(this).val().substr(0,a)):$(this).val("")}),$(document).on("click","input[data-role='pagopasarela']",function(){var a=$(this);$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/pagopasarela",beforeSend:function(){a.button("disable"),$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(e){"ok"==e.result?($("#div-pasarela-info form").remove(),$("#div-pasarela-info").append(e.response),dataLayer.push(e.analytics),$('form[id="form-pasarela"]').submit()):(a.button("enable"),$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+e.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"}))},error:function(e,o,i){a.button("enable"),alert("Error: "+i)}})}),$(document).on("click","a[data-role='crearcotizacion']",function(){$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/crearcotizacion",beforeSend:function(){$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(a){$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+a.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})},error:function(a,e,o){alert("Error: "+o)}})}),$(document).on("click","#form-registro input[data-registro='registro']",function(){var a=$(this).parents("form"),e=$(this);return $.ajax({type:"POST",async:!0,url:requestUrl+"/usuario/registro",data:a.serialize(),beforeSend:function(){e.button("disable"),$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(o){var i=$.parseJSON(o);"ok"===i.result?($("#main-page").html(i.response.bienvenidaHTML),$("#main-page").trigger("create")):"error"===i.result?(e.button("enable"),$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+i.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})):(e.button("enable"),$.each(i,function(e,o){$("#"+a.attr("id")+" #"+e+"_em_").html(o),$("#"+a.attr("id")+" #"+e+"_em_").css("display","block")}))},error:function(a,o,i){e.button("enable"),alert("Error: "+i)}}),!1}),$(document).on("click","#form-autenticar input[data-registro='autenticar']",function(){var a=$(this).parents("form"),e=$(this);return $.ajax({type:"POST",async:!0,url:requestUrl+"/usuario/ingresar",data:a.serialize(),beforeSend:function(){e.button("disable"),$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(o){var i=$.parseJSON(o);"ok"===i.result?window.location.replace(i.response.redirect):"error"===i.result?(e.button("enable"),$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+i.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})):(e.button("enable"),$.each(i,function(e,o){$("#"+a.attr("id")+" #"+e+"_em_").html(o),$("#"+a.attr("id")+" #"+e+"_em_").css("display","block")}))},error:function(a,o,i){e.button("enable"),alert("Error: "+i)}}),!1}),$(document).on("click","#form-recordar input[data-registro='recordar']",function(){var a=$(this).parents("form"),e=$(this);return $.ajax({type:"POST",async:!0,url:requestUrl+"/usuario/recordar",data:a.serialize(),beforeSend:function(){e.button("disable"),$.mobile.loading("show")},complete:function(){$.mobile.loading("hide")},success:function(o){var i=$.parseJSON(o);"ok"===i.result?(e.button("enable"),a.trigger("reset"),$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+i.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})):"error"===i.result?(e.button("enable"),$("<div>").mdialog({content:"<div data-role='main'><div class='ui-content' data-role='content' role='main'>"+i.response+"<a class='ui-btn ui-btn-r ui-corner-all ui-shadow' data-rel='back' href='#'>Aceptar</a></div></div>"})):(e.button("enable"),$.each(i,function(e,o){$("#"+a.attr("id")+" #"+e+"_em_").html(o),$("#"+a.attr("id")+" #"+e+"_em_").css("display","block")}))},error:function(a,o,i){e.button("enable"),alert("Error: "+i)}}),!1}),$(document).on("change","#form-listapersonal input[id='ListasPersonales_estadoLista']",function(){$(this).is(":checked")?$("#div-lista-config-recordacion").removeClass("hide"):$("#div-lista-config-recordacion").addClass("hide")}),$(document).on("click","a[data-role='tooltip']",function(){var a="autotooltip-"+uniqueId(),e=$(this).attr("data-arrow")?$(this).attr("data-arrow"):"t",o="<div data-role='popup' id='"+a+"' class='ui-content' data-arrow='"+e+"' data-theme='a'><p>"+$(this).attr("data-msg")+"</p></div>";$("body").append(o),$("#"+a).popup({positionTo:$(this),afterclose:function(e,o){$("#"+a).remove()}}),$("#"+a).popup("open")}),$(document).ready(function(){$(".lst_ub_cdd .ui-collapsible-heading-toggle").click(function(){$("li a.c_btn_sel").removeClass("ui-btn-active2"),$(".list_ciud.ui-listview li").removeClass("active2")}),$("a.c_btn_sel").click(function(){$("li a.c_btn_sel").removeClass("ui-btn-active2"),$(".list_ciud.ui-listview li").removeClass("active2"),$(this).addClass("ui-btn-active2"),$(this).parent("li").addClass("active2")})});