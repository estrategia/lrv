function alert(a){bootbox.alert({message:a,callback:function(){},buttons:{ok:{label:"Aceptar",className:"btn-danger"}}})}function listaProductoVistaActualizar(){listaProductoVista($('button[data-role="tipovista-listaproductos"]button[data-active="true"]').attr("data-type"))}function listaProductoVista(a){"lineal"===a?($(".descripcion-grid").css("display","none"),$(".descripcion-lineal").css("display","block"),listaProductoLineal()):"cuadricula"===a&&($(".descripcion-grid").css("display","block"),$(".descripcion-lineal").css("display","none"),listaProductoCuadricula())}function listaProductoLineal(){$("#lista-productos").removeClass("list_cuadricula"),$("#lista-productos").addClass("list_lineal"),$("#lista-productos.list_lineal .listaProductos li .content-txt2").addClass("row"),$("#lista-productos.list_lineal .listaProductos li .content-txt2 .img-list-products").addClass("col-sm-3"),$("#lista-productos.list_lineal .listaProductos li .content-txt2 .content_product").addClass("col-sm-5"),$("#lista-productos.list_lineal .listaProductos li .content-txt2 .botones-list").addClass("col-sm-4")}function listaProductoCuadricula(){$("#lista-productos").removeClass("list_lineal"),$("#lista-productos").addClass("list_cuadricula"),$("#lista-productos.list_cuadricula .listaProductos li .content-txt2").removeClass("row"),$("#lista-productos.list_cuadricula .listaProductos li .content-txt2 .img-list-products").removeClass("col-sm-3"),$("#lista-productos.list_cuadricula .listaProductos li .content-txt2 .content_product").removeClass("col-sm-5"),$("#lista-productos.list_cuadricula .listaProductos li .content-txt2 .botones-list").removeClass("col-sm-4")}function ajustebuscador(){widhtControl=$(".content-category .controls").width(),widhtBoton=$(".content-category .controls #btn-buscador-productos").width(),widhtDrop=$(".content-category .controls .float-right").width(),width=widhtControl-(widhtBoton+widhtDrop),$(".content-category .controls >span").width(width+6)}function ajuesmenu(){widhtNav=$("nav.main_menu").width(),widtCat=.25*widhtNav,$(".main_menu .categorias").width(widtCat),widht=$(".main_menu .categorias").width(),widhtDocument=widhtNav-widht,$(".categorias .category > li").width(widht),$(".categorias .category > li .right-nav").width(widhtDocument),total=$(".main_menu .modulo-menu").length,itemswidth=widhtDocument/total,$(".main_menu .modulo-menu").width(itemswidth)}function isEmptyStr(a){return!a||0===a.length}function modificarCarro(a,o){var t={modificar:o,position:a};if(1==o){var r=parseInt($("#cantidad-producto-fraccion-"+a).val());isNaN(r)?r=-1:1>r&&(r=1);var i=parseInt($("#cantidad-producto-unidad-"+a).val());if((isNaN(i)||1>i)&&(i=1),r>0){var e=parseInt($("#cantidad-producto-fraccion-"+a).attr("data-nfracciones")),n=parseInt($("#cantidad-producto-fraccion-"+a).attr("data-ufraccionamiento")),c=Math.floor(e/n);if(r>=c){var d=Math.floor(r/c),s=r%c;i+=d,r=s}}t.cantidadU=i,t.cantidadF=r}else if(2==o){var l=parseInt($("#cantidad-producto-"+a).val());(isNaN(l)||1>l)&&(l=1),t.cantidad=l}else if(3==o){var l=parseInt($("#cantidad-producto-bodega-"+a).val());(isNaN(l)||1>l)&&(l=1),t.cantidad=l}$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/modificar",data:t,beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(a){"ok"===a.result?($("#div-carro").html(a.response.carroHTML),$("#div-carro").trigger("create"),a.response.canastaHTML&&($("#div-carro-canasta").html(a.response.canastaHTML),$("#div-carro-canasta").trigger("create")),a.response.dialogoHTML&&alert(a.response.dialogoHTML)):($("#div-carro").html(a.response.carroHTML),$("#div-carro").trigger("create"),alert(a.response.message))},error:function(a,o,t){alert("Error: "+t)}})}function pasoInformacion(a,o,t){var r={siguiente:o,"FormaPagoForm[idDireccionDespacho]":$('input[name="FormaPagoForm[idDireccionDespacho]"]:checked').val(),"FormaPagoForm[indicePuntoVenta]":$('input[name="FormaPagoForm[indicePuntoVenta]"]').val(),"FormaPagoForm[tipoEntrega]":$('input[name="FormaPagoForm[tipoEntrega]"]').val()};$.ajax({type:"POST",async:!0,url:requestUrl+"/carro/pagar/paso/"+a+"/post/true",data:$.param(r)+"&"+$("#form-pago-comentario").serialize()+"&"+$("#form-direccion-pagoinvitado").serialize()+"&"+$("#form-pago-entrega").serialize()+"&"+$("#form-pago-pago").serialize()+"&"+$("#form-pago-bono").serialize(),beforeSend:function(){t.prop("disabled",!0),$('div[id^="FormaPagoForm_"].text-danger').html(""),$('div[id^="FormaPagoForm_"].text-danger').css("display","none"),Loading.show()},complete:function(){Loading.hide()},success:function(a){var o=$.parseJSON(a);"ok"===o.result?(t.prop("disabled",!1),window.location.replace(o.redirect)):"error"===o.result?(Loading.hide(),alert(o.response),t.prop("disabled",!1)):($.each(o,function(a,o){$("#"+a+"_em_").html(o),$("#"+a+"_em_").css("display","block")}),t.prop("disabled",!1),Loading.hide())},error:function(a,o,r){Loading.hide(),alert("Error: "+r),t.prop("disabled",!1)}})}function pasoConfirmacion(a,o,t){var r={siguiente:o};$.ajax({type:"POST",async:!0,url:requestUrl+"/carro/pagar/paso/"+a+"/post/true",data:$.param(r)+"&"+$("#form-pago-confirmacion").serialize(),beforeSend:function(){t.prop("disabled",!0),Loading.show()},complete:function(){Loading.hide()},success:function(a){var o=$.parseJSON(a);"ok"===o.result?window.location.replace(o.redirect):"error"===o.result?(alert(o.response),t.prop("disabled",!1)):($.each(o,function(a,o){$("#"+a+"_em_").html(o),$("#"+a+"_em_").css("display","block")}),t.prop("disabled",!1))},error:function(a,o,r){alert("Error: "+r),t.prop("disabled",!1)}})}function recalcularFiltros(a){var o={};$("input[id^='FiltroForm_listMarcas_']").each(function(){$(this).is(":checked")&&(o[$(this).val()]=parseInt($(this).val()))});var t={};$("input[id^='FiltroForm_listFiltros_']").each(function(){$(this).is(":checked")&&(t[$(this).val()]=parseInt($(this).attr("data-filtro")))}),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/catalogo/filtro",data:{marcas:o,atributos:t,tipo:a},beforeSend:function(){Loading.show()},success:function(a){a.hasOwnProperty("marcas")&&($("#div-filtro-marcas").html(a.marcas),$("#div-filtro-marcas").trigger("create")),a.hasOwnProperty("atributos")&&($("#div-filtro-atributos").html(a.atributos),$("#div-filtro-atributos").trigger("create")),filtrarListaProductos()},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}})}function ListViewProductsUpdate(){var a=$.fn.yiiListView.getUrl("id-productos-list");if(a){var o=a.split("?"),t=$.deparam.querystring("?"+(o[1]||""));if(t.categoriasBuscador&&"array"==jQuery.type(t.categoriasBuscador)){var r="";$.each(t.categoriasBuscador,function(a,o){o&&(r.length>0?r+="_"+o:r=""+o)}),t.categoriasBuscador=r}$.fn.yiiListView.update("id-productos-list",{data:t})}else $.fn.yiiListView.update("id-productos-list")}function filtrarListaProductos(){$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/catalogo/filtrar",data:$("#form-filtro-listaproductos").serialize(),beforeSend:function(){Loading.show()},success:function(a){"ok"===a.result?ListViewProductsUpdate():(Loading.hide(),alert(a.response))},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}})}function setPrecioFiltroForm(a,o){$("#FiltroForm_precio_0_text").val("$"+format(a[0])),$("#FiltroForm_precio_1_text").val("$"+format(a[1])),$("#FiltroForm_precio_0").val(a[0]),$("#FiltroForm_precio_1").val(a[1]),o&&filtrarListaProductos()}function raty(){$("[data-role='raty']").raty({starOn:requestUrl+"/libs/raty/images/star-on.png",starOff:requestUrl+"/libs/raty/images/star-off.png",starHalf:requestUrl+"/libs/raty/images/star-half.png",cancelOn:requestUrl+"/libs/raty/images/cancel-on.png",cancelOff:requestUrl+"/libs/raty/images/cancel-off.png",hints:["mala","deficiente","regular","buena","excelente"],noRatedMsg:"Sin calificaciÃ³n",readOnly:function(){return"true"===$(this).attr("data-readonly")},click:function(a,o){if($(this).attr("data-callback")){var t=$(this).attr("data-callback");window[t](a,o)}},score:function(){return $(this).attr("data-score")}})}function capturarfiltrocalificacion(a,o){var t=a;t=parseInt(t),isNaN(t)&&(t=-1),$("#FiltroForm_calificacion").val(t),$("#calificacion-filtro-listaproductos").attr("data-score",t),filtrarListaProductos()}function actualizarNumerosPagina(){var a=$("#items-page").val();$.fn.yiiListView.update("id-productos-list",{data:{pageSize:a}})}function disminuirCantidadFraccionado(a,o,t,r,i,e){var n=$("#cantidad-producto-fraccion-"+a+"-"+e).val();if(n--,0>n){var n=$("#cantidad-producto-unidad-"+a+"-"+e).val();n--,0>n&&(n=0),$("#cantidad-producto-unidad-"+a+"-"+e).val(n),$("#subtotal-producto-unidad-"+a).html("$"+format(n*i)),n=o/t-1}$("#subtotal-producto-fraccion-"+a).html("$"+format(n*r)),$("#cantidad-producto-fraccion-"+a+"-"+e).val(n)}function aumentarCantidadFraccionado(a,o,t,r,i,e){var n=$("#cantidad-producto-fraccion-"+a+"-"+e).val();if(n++,n*t==o){var n=$("#cantidad-producto-unidad-"+a+"-"+e).val();n++,$("#cantidad-producto-unidad-"+a+"-"+e).val(n),$("#subtotal-producto-unidad-"+a).html("$"+format(n*i)),n=0}$("#subtotal-producto-fraccion-"+a).html("$"+format(n*r)),$("#cantidad-producto-fraccion-"+a+"-"+e).val(n)}function validarCantidadFraccionado(a,o,t,r,i,e){var n=$("#cantidad-producto-fraccion-"+a+"-"+e).val(),c=$("#cantidad-producto-unidad-"+a+"-"+e).val();if(0>n&&(n=0),n*t>=o){var d=Math.floor(n*t/o);c=1*c+d,$("#cantidad-producto-unidad-"+a+"-"+e).val(c),$("#subtotal-producto-unidad-"+a).html("$"+format(c*i)),n=n*t%o}$("#subtotal-producto-fraccion-"+a).html("$"+format(n*r)),$("#cantidad-producto-fraccion-"+a+"-"+e).val(n)}function aumentarCantidadUnidad(a,o){var t=$("#cantidad-producto-unidad-"+a).val();0>t&&(t=0),$("#subtotal-producto-unidad-"+a).html("$"+format(t*o)),$("#cantidad-producto-unidad-"+a).val(t)}function disminuirCantidadCombo(a,o){var t=$("#cantidad-combo-"+a).val();t--,0>t&&(t=0),$("#subtotal-producto-combo-"+a).html("$"+format(t*o)),$("#cantidad-combo-"+a).val(t)}function aumentarCantidadCombo(a,o){var t=$("#cantidad-combo-"+a).val();t++,0>t&&(t=0),$("#subtotal-producto-combo-"+a).html("$"+format(t*o)),$("#cantidad-combo-"+a).val(t)}function validarCantidadCombo(a,o){var t=$("#cantidad-producto-combo-"+a).val();0>t&&(t=0),$("#subtotal-producto-combo-"+a).html("$"+format(t*o)),$("#cantidad-producto-combo-"+a).val(t)}function guardarCalificacion(a,o,t){var r=$("#calificacion-titulo-"+a).val(),i=$("#calificacion-comentario-"+a).val(),e=$(o).val(),n=$("#form-calificacion");$.ajax({type:"POST",url:t,data:"codigo="+a+"&titulo="+r+"&calificacion="+e+"&comentario="+i+"&"+n.serialize(),dataType:"json",beforeSend:function(){Loading.show()},success:function(a){"ok"===a.result?($("[data-role='calificacion']").remove(),$("#calificacion-producto").html("<div class='col-md-6'>TU COMENTARIO HA SIDO PUBLICADO, ESTE SERÃ APROBADO POR UN MODERADOR EN LAS PRÃXIMAS HORAS</div>")):"error"===a.result?($("#dialog").html(a.response),$("#dialog").dialog("open")):$.each(a,function(a,o){$("#"+n.attr("id")+" #"+a+"_em_").html(o),$("#"+n.attr("id")+" #"+a+"_em_").css("display","block")})},error:function(a,o,t){Loading.hide(),alert("Error: "+t)},complete:function(a){Loading.hide()}})}function format(a){a+="";var o=a.replace(/\./g,"");return isNaN(o)?"":(o=o.toString().split("").reverse().join("").replace(/(?=\d*\.?)(\d{3})/g,"$1."),o=o.split("").reverse().join("").replace(/^[\.]/,""))}function cambioUnidadesUbicacion(a,o,t){var r=$("#cantidad-producto-ubicacion-"+a).val(),i=$("#cantidad-producto-bodega-"+a).val();0==t?r--:r++,0>r&&(r=0),$("#cantidad-producto-ubicacion-"+a).val(r);var e=o*r;$("#subtotal-producto-ubicacion-"+a).html("$"+format(e));var n=e+i*o;$("#total-producto-"+a).html("$"+format(n))}function cambioUnidadesBodega(a,o,t){var r=$("#cantidad-producto-bodega-"+a).val(),i=$("#cantidad-producto-ubicacion-"+a).val();0==t?r--:r++,0>r&&(r=0),$("#cantidad-producto-bodega-"+a).val(r);var e=o*r;$("#subtotal-producto-bodega-"+a).html("$"+format(e));var n=e+i*o;$("#total-producto-"+a).html("$"+format(n))}function ubicacionGPS(){navigator.geolocation?(Loading.show(),navigator.geolocation.getCurrentPosition(obtenerPosicion,errorPosicion,{enableHighAccuracy:!0,timeout:3e4,maximumAge:0})):alert("Servicio no soportado por este navegador.")}function errorPosicion(a){Loading.hide();var o="NA";switch(a.code){case a.PERMISSION_DENIED:o="Por favor activar/habilitar servicio de ubicaciÃ³n de tu dispositivo.";break;case a.POSITION_UNAVAILABLE:o="PosiciÃ³n no disponible.";break;case a.TIMEOUT:o="ExpirÃ³ el tiempo de espera.";break;case a.UNKNOWN_ERROR:o="Error desconocido: "+a.message}alert(o)}function obtenerPosicion(a){var o=0,t=0;a&&(o=a.coords.latitude,t=a.coords.longitude),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/sitio/gps",data:{lat:o,lon:t},beforeSend:function(){Loading.show()},success:function(a){"ok"==a.result?bootbox.dialog({message:a.response.mensaje,title:"Ubicaci&oacute;n encontrada",buttons:{success:{label:"Usar esta ubicaciÃ³n",className:"btn-primary",callback:function(){$("#ubicacion-seleccion-ciudad").val(a.response.ciudad),$("#ubicacion-seleccion-sector").val(a.response.sector),$("#ubicacion-seleccion-direccion").val(""),$("#div-ubicacion-tipoubicacion > button").removeClass("activo").addClass("inactivo"),$('#div-ubicacion-tipoubicacion > button[data-role="ubicacion-gps"]').removeClass("inactivo").addClass("activo"),$('button[data-role="ubicacion-seleccion"]').removeClass("display-none"),ubicacionSeleccion()}},close:{label:"Cancelar",className:"btn-default",callback:function(){}}}}):alert(a.response),Loading.hide()},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}})}function seleccionTipoEntrega(a,o){$('div[data-role="tipoentrega"]').removeClass("activo"),$('div[data-role="tipoentrega"]div[data-tipo="'+a+'"]').addClass("activo"),$('div[data-role="tipoentrega"]').addClass("inactivo"),$('div[data-role="tipoentrega"]div[data-tipo="'+a+'"]').removeClass("inactivo"),$("#pasoporel-seleccion-pdv-nombre").html(""),$("#pasoporel-seleccion-pdv-direccion").html(""),$("#FormaPagoForm_tipoEntrega").val(a),$('div[data-role="tipoentrega-habilitar"]div[data-habilitar="'+a+'"]').removeClass("display-none"),$('div[data-role="tipoentrega-habilitar"]div[data-habilitar="'+a+'"] input').removeAttr("disabled"),$('div[data-role="tipoentrega-habilitar"]div[data-habilitar="'+o+'"]').addClass("display-none"),$('div[data-role="tipoentrega-habilitar"]div[data-habilitar="'+o+'"] input[type="text"]').val(""),$('div[data-role="tipoentrega-habilitar"]div[data-habilitar="'+o+'"] input[type="radio"]').prop("checked",!1),$('div[data-role="tipoentrega-habilitar"]div[data-habilitar="'+o+'"] input').attr("disabled","disabled")}function ubicacionSeleccion(){var a=$("#form-ubicacion");$.ajax({type:"POST",async:!0,url:requestUrl+"/sitio/ubicacionSeleccion",data:a.serialize(),dataType:"json",beforeSend:function(){Loading.show()},complete:function(a){Loading.hide()},success:function(a){"ok"==a.result?(dialogoAnimado(a.response),a.urlAnterior?window.location.replace(a.urlAnterior):window.location.replace(requestUrl)):alert(a.response)},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}})}function capturarcalificacionproducto(a,o){var t=a;t=parseInt(t),isNaN(t)&&(t=""),$("#CalificacionForm_calificacion").val(t),$("#calificacion_form").attr("data-score",t)}$(document).on("click",'button[data-role="tipovista-listaproductos"]',function(){listaProductoVista($(this).attr("data-type")),$('button[data-role="tipovista-listaproductos"]').attr("data-active","false"),$(this).attr("data-active","true")}),$(document).ready(function(){$(".main_menu .categorias").click(function(){ajuesmenu()}),ajuesmenu(),ajustebuscador()}),$(window).resize(function(){ajuesmenu(),ajustebuscador()}),$(".main_menu .cuidado-personal > a").click(function(){return $(".main_menu .cuidado-personal .right-nav").hide(),$(this).next(".right-nav").show(),!1}),$(document).on("change",'input[name="DireccionesDespacho[idDireccionDespacho]"]:radio',function(a){var o=$('input[name="DireccionesDespacho[idDireccionDespacho]"]:checked').val();$("div[id^='div-direccion-form-']").css("display","none"),$("#div-direccion-form-"+o).css("display","block"),$("html,body").animate({scrollTop:$("#div-direccion-form-"+o).offset().top},200)}),$(document).on("click","button[data-role='direccion-editar']",function(){$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/usuario/direccionActualizar",data:{render:!0,direccion:$(this).attr("data-direccion"),radio:$(this).attr("data-radio")},beforeSend:function(){$("#modal-nueva-direccion").remove(),Loading.show()},complete:function(){Loading.hide()},success:function(a){"ok"==a.result?($("body").append(a.response.dialogoHTML),$("#modal-nueva-direccion").modal("show")):alert(a.response)},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}})}),$(document).on("click","div[data-role='direccion-editar']",function(){$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/usuario/direccionActualizar",data:{render:!0,direccion:$(this).attr("data-direccion"),radio:$(this).attr("data-vista")},beforeSend:function(){$("#modal-nueva-direccion").remove(),Loading.show()},complete:function(){Loading.hide()},success:function(a){"ok"==a.result?($("body").append(a.response.dialogoHTML),$("#modal-nueva-direccion").modal("show")):alert(a.response)},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}})}),$(document).on("click","input[data-role='direccion-actualizar']",function(){var a=$(this).parents("form");return $.ajax({type:"POST",async:!0,url:requestUrl+"/usuario/direccionActualizar",data:$.param({radio:$(this).attr("data-radio")})+"&"+a.serialize(),beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?($("#modal-nueva-direccion").modal("hide"),dialogoAnimado(o.response.mensaje),o.response.direccionHTML&&$("#div-direccion-interior-"+o.response.direccion).html(o.response.direccionHTML)):"error"===o.result?alert(o.response):$.each(o,function(o,t){$("#"+a.attr("id")+" #"+o+"_em_").html(t),$("#"+a.attr("id")+" #"+o+"_em_").css("display","block")})},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}}),!1}),$(document).on("click","a[data-role='direccion-adicionar-modal']",function(){$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/usuario/direccionCrear",data:{render:!0},beforeSend:function(){Loading.show(),$("#modal-nueva-direccion").remove()},complete:function(){Loading.hide()},success:function(a){$("body").append(a.response.dialogoHTML),$("#modal-nueva-direccion").modal("show")},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}})}),$(document).on("click","input[data-role='direccion-adicionar']",function(){var a=$("#form-direccion"),o=$("[data-role='direccion-adicionar-modal']").attr("data-vista"),t={vista:o};return $.ajax({type:"POST",async:!0,url:requestUrl+"/usuario/direccionCrear",data:$.param(t)+"&"+a.serialize(),beforeSend:function(){$('div[id^="DireccionesDespacho_"].text-danger').html(""),$('div[id^="DireccionesDespacho_"].text-danger').css("display","none"),Loading.show()},complete:function(){Loading.hide()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?($("#modal-nueva-direccion").modal("hide"),dialogoAnimado(o.response.mensaje),$("#div-direcciones-pasoscompra").length?($("#div-direcciones-pasoscompra").html(o.response.direccionesHTML),$("#div-direcciones-pasoscompra").trigger("create")):($("#div-direcciones-lista").html(o.response.direccionesHTML),$("#div-direcciones-lista").trigger("create"))):"error"===o.result?alert(o.response):$.each(o,function(o,t){$("#"+a.attr("id")+" #"+o+"_em_").html(t),$("#"+a.attr("id")+" #"+o+"_em_").css("display","block")})},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}}),!1}),$(document).on("click","button[data-role='direccion-eliminar']",function(){var a=$(this).attr("data-direccion");return $.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/usuario/direccionEliminar",data:{direccion:a},beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(o){"ok"===o.result?($("#div-direccion-exterior-"+a).remove(),dialogoAnimado(o.response)):"error"===o.result&&alert(o.response)},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}}),!1}),$(document).on("click","a[data-role='pedidodetalle']",function(){var a=$(this).attr("data-compra");$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/agregarcompra",data:{compra:a},beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(a){"ok"===a.result?($("#div-carro-canasta").html(a.response.canastaHTML),$("#div-carro-canasta").trigger("create"),a.response.mensajeHTML&&dialogoAnimado(a.response.mensajeHTML)):alert(a.response)},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}})}),$(document).on("click","a[data-role='pedidolistaocultar']",function(){var a=$(this).attr("data-compra");$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/usuario/ocultarpedido",data:{compra:a},beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(a){"ok"===a.result?($.fn.yiiGridView.update("grid-cuenta-listapedidos"),dialogoAnimado(a.response)):alert(a.response)},error:function(a,o,t){alert("Error: "+t)}})}),$(document).on("click","a[data-role='cotizaciondetalle']",function(){var a=$(this).attr("data-cotizacion");$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/agregarcotizacion",data:{cotizacion:a},beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(a){"ok"===a.result?($("#div-carro-canasta").html(a.response.canastaHTML),$("#div-carro-canasta").trigger("create"),a.response.mensajeHTML&&dialogoAnimado(a.response.mensajeHTML)):alert(a.response)},error:function(a,o,t){alert("Error: "+t)}})}),$(document).on("click","[id^='enlace-pago-direccion-express-']",function(){var a=$(this).children("input");a.prop("checked",!0)}),$(document).on("click","a[data-role='usuario-pagoexpress-formapago']",function(){console.log("asdff");var a=$(this).children("input");a.prop("checked",!0)}),$(document).on("change","#form-listapersonal input[id='ListasPersonales_estadoLista']",function(){$(this).is(":checked")?$("#div-lista-config-recordacion").removeClass("hide"):$("#div-lista-config-recordacion").addClass("hide")}),$(document).on("click","input[data-role='lstpersonalform']",function(){var a={},o=$(this).attr("data-lista");void 0!==o&&(a.lista=o),$.ajax({type:"POST",async:!0,url:requestUrl+"/usuario/listapersonal/lista/post",data:$.param(a)+"&"+$("#form-listapersonal").serialize(),beforeSend:function(){$('div[id^="ListasPersonales_"].has-error').html(""),$('div[id^="ListasPersonales_"].has-error').css("display","none"),$("#form-listapersonal input[type=button]").attr("disabled","disabled"),Loading.show()},complete:function(){Loading.hide(),$("#form-listapersonal input[type=button]").removeAttr("disabled")},success:function(a){var a=$.parseJSON(a);"ok"===a.result?($("#ListaGuardarForm_idLista").length&&$("#ListaGuardarForm_idLista").append(a.response.optionHtml),$("#gridview-listapersonal").length&&$.fn.yiiGridView.update("gridview-listapersonal"),$("#form-listapersonal")[0].reset(),$("#modal-lista-personal").modal("hide"),dialogoAnimado(a.response.mensajeHtml)):"error"===a.result?alert(a.response):$.each(a,function(a,o){$("#"+a+"_em_").html(o),$("#"+a+"_em_").css("display","block")})},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}})}),$(document).on("click","a[data-role='listapersonaleliminar']",function(){var a=$(this).attr("data-lista");$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/usuario/listapersonaleliminar",data:{lista:a},beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(a){"ok"===a.result?($.fn.yiiGridView.update("gridview-listapersonal"),dialogoAnimado(a.response)):alert(a.response)},error:function(a,o,t){alert("Error: "+t)}})}),$(document).on("click","a[data-role='listapersonal']",function(){var a=$(this).attr("data-lista");$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/agregarlista",data:{lista:a},beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(a){"ok"===a.result?($("#div-carro-canasta").html(a.response.canastaHTML),$("#div-carro-canasta").trigger("create"),a.response.mensajeHTML&&dialogoAnimado(a.response.mensajeHTML)):alert(a.response)},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}})}),$(document).on("click","a[data-role='eliminarlistadetalle']",function(){var a=$(this).attr("data-detalle");$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/usuario/listadetalle/accion/eliminar",data:{detalle:a},beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(a){"ok"===a.result?(dialogoAnimado(a.response.mensajeHTML),$("#div-listadetalle").html(a.response.detalleHTML),$("#div-listadetalle").trigger("create")):"error"===a.result&&alert(a.response)},error:function(a,o,t){alert("Error: "+t)}})}),$(document).on("click","a[data-role='actualizarlistadetalle']",function(){var a=$(this).attr("data-detalle"),o=$("#campo-producto-"+a).val();o=parseInt(o),isNaN(o)&&(o=0),0>=o&&(o=0),$("#campo-producto-"+a).val(o),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/usuario/listadetalle/accion/actualizar",data:{detalle:a,unidades:o},beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(a){"ok"===a.result?dialogoAnimado(a.response.mensajeHTML):"error"===a.result&&alert(a.response)},error:function(a,o,t){alert("Error: "+t)}})}),$(document).on("click","a[data-role='lstpersonalguardar']",function(){var a=$(this).attr("data-tipo"),o=$(this).attr("data-id");a=parseInt(a),isNaN(a)&&(a=-1);var t=$(this).attr("data-codigo"),r=0;return 1===a?(r=$("#cantidad-producto-unidad-"+t+"-"+o).val(),r=parseInt(r),isNaN(r)&&(r=0)):2===a&&(r=$("#cantidad-combo-"+t).val(),r=parseInt(r),isNaN(r)&&(r=0)),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/usuario/listapersonal/lista/guardar",data:{codigo:t,tipo:a,unidades:r,render:!0},beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(a){"ok"===a.result?($("#modal-lista-guardar").length?$("#div-modal-agregar-lista").html(a.response.dialogoHTML):($("body").append('<div id="div-modal-agregar-lista"></div>'),$("#div-modal-agregar-lista").append(a.response.dialogoHTML)),$("#modal-lista-guardar").modal("show")):"error"===a.result&&alert(a.response)},error:function(a,o,t){alert("Error: "+t)}}),!1}),$(document).on("click","input[data-role='lstpersonalguardar']",function(){return $.ajax({type:"POST",async:!0,url:requestUrl+"/usuario/listapersonal/lista/guardar",data:$("#form-listaguardar").serialize(),beforeSend:function(){$('div[id^="ListaGuardarForm_"].has-error').html(""),$('div[id^="ListaGuardarForm_"].has-error').css("display","none"),$("#form-listaguardar input[type=button]").attr("disabled","disabled"),Loading.show()},complete:function(){$("#form-listaguardar input[type=button]").removeAttr("disabled"),Loading.hide()},success:function(a){var a=$.parseJSON(a);"ok"===a.result?($("#modal-lista-guardar").modal("hide"),dialogoAnimado(a.response)):"error"===a.result?alert(a.response):$.each(a,function(a,o){$("#"+a+"_em_").html(o),$("#"+a+"_em_").css("display","block")})},error:function(a,o,t){alert("Error: "+t)}}),!1}),$(function(){$('[data-toggle="tooltip"]').tooltip()}),$.fn.clearForm=function(){return this.each(function(){var a=this.type,o=this.tagName.toLowerCase();return"form"==o?$(":input",this).clearForm():void("text"==a||"password"==a||"textarea"==o?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==o&&(this.selectedIndex=-1))})},$(document).on("click","a[data-role='crearcotizacion']",function(){$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/crearcotizacion",beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(a){dialogoAnimado(a.response)},error:function(a,o,t){alert("Error: "+t)}})}),$(document).on("click","a[data-role='carrovaciar']",function(){$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/vaciar",beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(a){"ok"==a.result?($("#div-carro").html(a.carro),$("#div-carro").trigger("create"),$("#div-carro-canasta").html(a.canasta),$("#div-carro-canasta").trigger("create")):alert(a.response)},error:function(a,o,t){alert("Error: "+t)}})}),$(document).on("click","button[data-role='modificarcarro']",function(){var a=$(this).attr("data-position"),o=$(this).attr("data-modificar"),t=$(this).attr("data-operation"),r=0,i="";if(1==o){var e=1==$(this).attr("data-fraction");i=e?"#cantidad-producto-fraccion-"+a:"#cantidad-producto-unidad-"+a}else 2==o?i="#cantidad-producto-"+a:3==o&&(i="#cantidad-producto-bodega-"+a);r=parseInt($(i).val()),isNaN(r)||1>r?r=1:"+"==t?(r++,1>r&&(r=1)):"-"==t&&r>0&&(r--,1>r&&(r=1)),$(i).val(r),modificarCarro(a,o)}),$(document).on("change","input[data-role='modificarcarro']",function(){var a=parseInt($(this).val()),o=$(this).attr("data-position"),t=$(this).attr("data-modificar");(isNaN(a)||1>a)&&(a=1),$(this).val(a),modificarCarro(o,t)}),$(document).on("click","a[data-eliminar='1'], a[data-eliminar='2'], a[data-eliminar='3']",function(){var a=$(this).attr("data-position"),o=$(this).attr("data-eliminar");$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/eliminar",data:{id:a,eliminar:o},beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(a){"ok"==a.result?($("#div-carro").html(a.carro),$("#div-carro").trigger("create"),$("#div-carro-canasta").html(a.canasta),$("#div-carro-canasta").trigger("create")):alert(a.response)},error:function(a,o,t){alert("Error: "+t)}})}),$(document).on("click","button[id='btn-carropagar-siguiente'], button[id='btn-carropagar-anterior']",function(){var a=$(this).attr("data-origin"),o=$(this).attr("data-redirect");return"informacion"===a?pasoInformacion(a,o,$(this)):"confirmacion"===a&&pasoConfirmacion(a,o,$(this)),!1}),$(document).on("click","button[data-role='pagopasarela']",function(){var boton=$(this);$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/pagopasarela",beforeSend:function(){boton.prop("disabled",!0),Loading.show()},complete:function(){Loading.hide()},success:function(data){"ok"==data.result?($("#div-pasarela-info form").remove(),$("#div-pasarela-info").append(data.response),eval(data.analytics),$('form[id="form-pasarela"]').submit()):(boton.prop("disabled",!1),alert(data.response))},error:function(a,o,t){boton.prop("disabled",!1),alert("Error: "+t)}})}),$(document).on("change","input[id^='FiltroForm_listMarcas_']",function(){recalcularFiltros(1)}),$(document).on("change","input[id^='FiltroForm_listFiltros_']",function(){recalcularFiltros(2)}),$(document).on("click","input[id^='FiltroForm_listCategoriasTienda_']",function(){filtrarListaProductos()}),$(document).on("click","a[data-role='filtro-listaproductos-reset']",function(){$("#form-filtro-listaproductos").clearForm();var a=[parseInt($("#FiltroForm_precio").attr("data-slider-min")),parseInt($("#FiltroForm_precio").attr("data-slider-max"))];setPrecioFiltroForm(a,!1),$("#FiltroForm_precio").slider("setValue",a),$("#calificacion-filtro-listaproductos").raty("score",0),$("#calificacion-filtro-listaproductos").attr("data-score",-1),"1"==$(this).attr("data-tipo")?recalcularFiltros(2):filtrarListaProductos()}),$(document).on("change","select[data-role='orden-listaproductos']",function(){$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/catalogo/filtrar",data:{"OrdenamientoForm[orden]":$("#OrdenamientoForm_orden").val()},beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(a){"ok"===a.result?ListViewProductsUpdate():alert(a.response)},error:function(a,o,t){Loading.hide(),
alert("Error: "+t)}})}),$(document).on("slide","#FiltroForm_precio",function(){var a=$("#FiltroForm_precio").slider("getValue");setPrecioFiltroForm(a,!1)}),$(document).on("slideStop","#FiltroForm_precio",function(){var a=$("#FiltroForm_precio").slider("getValue");setPrecioFiltroForm(a,!0)}),$(document).on("change","#FiltroForm_precio_0_text",function(){var a=$(this).val();a=parseInt(a),isNaN(a)&&(a=parseInt($("#FiltroForm_precio").attr("data-slider-min"))),$("#FiltroForm_precio").slider("setValue",[a,$("#FiltroForm_precio").slider("getValue")[1]]),$("#FiltroForm_precio_0").val(a),$("#FiltroForm_precio_0_text").val("$"+format(a)),filtrarListaProductos()}),$(document).on("change","#FiltroForm_precio_1_text",function(){var a=$(this).val();a=parseInt(a),isNaN(a)&&(a=parseInt($("#FiltroForm_precio").attr("data-slider-max"))),$("#FiltroForm_precio").slider("setValue",[$("#FiltroForm_precio").slider("getValue")[0],a]),$("#FiltroForm_precio_1").val(a),$("#FiltroForm_precio_1_text").val("$"+format(a)),filtrarListaProductos()}),$(document).on("click","a[id='btn-buscador-productos']",function(){var a=$(this).parents("form"),o=$("input[id='busqueda']").val().trim();isEmptyStr(o)||a.submit()}),$(document).on("click","div[data-role='formapago']",function(){var a=$(this).attr("data-tipo");if("datafono"==a)return $("#modal-formapago input[type='radio']").removeAttr("checked"),$("#modal-formapago #idFormaPago_"+$("#FormaPagoForm_idFormaPago_datafono").val()).prop("checked",!0),$("div[data-role^='formapago-logo-']").addClass("display-none"),$("div[data-role='formapago-logo-"+$("#FormaPagoForm_idFormaPago_datafono").val()+"']").removeClass("display-none"),$("#modal-formapago").modal("show"),!1;var o=$("div[data-role='formapago-descripcion']div[data-tipo='"+a+"']");$("div[data-role='formapago-descripcion']").addClass("display-none"),o.length>0&&o.removeClass("display-none")}),$(document).on("click","#modal-formapago input[type='radio']",function(){$(this).is(":checked")&&($('input[id="FormaPagoForm_idFormaPago_datafono"]').prop("checked",!0),$('input[id="FormaPagoForm_idFormaPago_datafono"]').val($(this).val()),$("div[data-role^='formapago-logo-']").addClass("display-none"),$("div[data-role='formapago-logo-"+$(this).val()+"']").removeClass("display-none"),$("div[data-role='formapago-logo-pagoenlinea']").addClass("display-none"),$("div[data-role='formapago-descripcion']").addClass("display-none"))}),$(document).ready(function(){$(function(){var a=$("textarea[data-countchar]");a.length&&countChar(a,a.attr("data-countchar"))}),raty()}),$(document).on("keypress","#form-autenticar",function(a){13==a.keyCode&&($("#form-autenticar input[data-registro-desktop='autenticar']").trigger("click"),a.preventDefault())}),$(document).ready(function(){$('[data-toggle="popover"]').popover(),$("input[data-role='bootstrap-slider']").slider(),$(".slide-productos").owlCarousel({items:5,lazyLoad:!0,navigation:!0,pagination:!1,navigationText:["<i class='glyphicon glyphicon-chevron-left'></i>","<i class='glyphicon glyphicon-chevron-right'></i>"],autoPlay:3e3}),$(".ad-gallery").adGallery({loader_image:"../images/libs/ad-gallery/loader.gif",update_window_hash:!1,width:400,height:300,thumb_opacity:.7})}),$(".ciudades").select2(),$(document).on("click",'button[data-role="ubicacion-gps"]',function(){ubicacionGPS()}),$(document).on("click",'button[data-role="pasoporel-seleccion-pdv"]',function(){seleccionTipoEntrega(tipoEntrega.presencial,tipoEntrega.domicilio),$("#pasoporel-seleccion-pdv-nombre").html($(this).attr("data-nombre")),$("#pasoporel-seleccion-pdv-direccion").html($(this).attr("data-direccion")),$("#modal-pasoporel-seleccionar").modal("hide"),$('input[name="FormaPagoForm[indicePuntoVenta]"]').val($(this).attr("data-idx"))}),$(document).on("click",'div[data-role="tipoentrega"]',function(){var a=$(this).attr("data-tipo"),o=a==tipoEntrega.presencial?tipoEntrega.domicilio:tipoEntrega.presencial;a==tipoEntrega.presencial?$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/pasoporel",data:{opcion:"modal"},beforeSend:function(){$("#modal-pasoporel-seleccionar").remove(),Loading.show()},success:function(a){"ok"==a.result?($("body").append(a.response),$("#modal-pasoporel-seleccionar").modal("show")):alert(a.response),Loading.hide()},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}}):seleccionTipoEntrega(a,o)}),$(document).on("click",'button[data-role="ubicacion-direccion"]',function(){return $.ajax({type:"GET",async:!0,url:requestUrl+"/usuario/direccionesUbicacion",dataType:"html",beforeSend:function(){$("#modal-ubicacion-direcciones").remove(),Loading.show()},complete:function(a){Loading.hide()},success:function(a){$("#main-page").append(a),$("#modal-ubicacion-direcciones").modal("show")},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}}),!1}),$(document).on("click",'button[data-role="ubicacion-seleccion-direccion"]',function(){$("#ubicacion-seleccion-ciudad").val(""),$("#ubicacion-seleccion-sector").val(""),$("#ubicacion-seleccion-direccion").val($(this).attr("data-direccion")),$("#div-ubicacion-tipoubicacion > button").removeClass("activo").addClass("inactivo"),$('#div-ubicacion-tipoubicacion > button[data-role="ubicacion-direccion"]').removeClass("inactivo").addClass("activo"),ubicacionSeleccion()}),$(document).on("click",'a[data-role="ubicacion-seleccion-nodomicilio"]',function(){$("#ubicacion-seleccion-ciudad").val($(this).attr("data-ciudad")),$("#ubicacion-seleccion-sector").val($(this).attr("data-sector")),$("#ubicacion-seleccion-direccion").val(""),ubicacionSeleccion()}),$(document).on("click",'button[data-role="ubicacion-mapa"]',function(){return $("#modal-ubicacion-map").length>0?($("#modal-ubicacion-map").modal("show"),resizeMap()):$.ajax({type:"POST",dataType:"html",async:!0,url:requestUrl+"/sitio/mapa",beforeSend:function(){Loading.show()},success:function(a){$.getScript("https://maps.googleapis.com/maps/api/js?client="+gmapKey).done(function(o,t){$.getScript(requestUrl+"/js/ubicacion.min.js").done(function(o,t){$("#main-page").append(a),$("#select-ubicacion-psubsector .ciudades").select2(),inicializarMapa(),$("#modal-ubicacion-map").modal("show"),resizeMap(),Loading.hide()}).fail(function(a,o,t){Loading.hide(),alert("Error al inicializar mapa: "+t)})}).fail(function(a,o,t){Loading.hide(),alert("Error al cargar mapa: "+t)})},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}}),!1}),$(document).on("click",'button[data-role="ubicacion-seleccion-mapa"]',function(){Loading.show();var a=0,o=0;return map&&(a=map.getCenter().lat(),o=map.getCenter().lng()),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/sitio/gps",data:{lat:a,lon:o},beforeSend:function(){$("#modal-no-serviciodomicilio").remove(),Loading.show()},success:function(a){"ok"==a.result?($("#ubicacion-seleccion-ciudad").val(a.response.ciudad),$("#ubicacion-seleccion-sector").val(a.response.sector),$("#ubicacion-seleccion-direccion").val(""),$("#div-ubicacion-tipoubicacion > button").removeClass("activo").addClass("inactivo"),$('#div-ubicacion-tipoubicacion > button[data-role="ubicacion-mapa"]').removeClass("inactivo").addClass("activo"),ubicacionSeleccion()):a.responseModal?($("body").append(a.responseModal),$("#modal-no-serviciodomicilio").modal("show")):alert(a.response),Loading.hide()},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}}),!1}),$(document).on("change",'select[data-role="ciudad-despacho-map"]',function(){var a=$(this).val().trim();if(a.length>0){var o=$('select[data-role="ciudad-despacho-map"] option[value="'+a+'"]').attr("selected","selected");map&&(map.setCenter(new google.maps.LatLng(parseFloat(o.attr("data-latitud")),parseFloat(o.attr("data-longitud")))),map.setZoom(13),$("#select-ubicacion-preferencia").remove(),$("#select-ubicacion-psubsector").removeClass("div-center").addClass("float-left"),$.ajax({type:"POST",async:!0,url:requestUrl+"/sitio/ubicacionSeleccion",data:{ciudad:a},dataType:"html",beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(a){a.length>0?($("#select-ubicacion-content").append(a),$("#select-ubicacion-preferencia .ciudades").select2()):($("#select-ubicacion-psubsector").removeClass("float-left").addClass("div-center"),map.setZoom(15))},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}}))}}),$(document).on("change",'select[data-role="sector-despacho-map"]',function(){var a=$(this).val().trim();if(a.length>0){var o=$('select[data-role="sector-despacho-map"] option[value="'+a+'"]').attr("selected","selected");map&&(map.setCenter(new google.maps.LatLng(parseFloat(o.attr("data-latitud")),parseFloat(o.attr("data-longitud")))),map.setZoom(14))}}),$(document).on("click","a[data-cargar='2']",function(){var a=$(this).attr("data-combo"),o=$("#cantidad-combo-"+a).val();return o=parseInt(o),isNaN(o)&&(o=0),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/agregarCombo",data:{combo:a,cantidad:o},beforeSend:function(){Loading.show()},complete:function(a){Loading.hide()},success:function(a){"ok"===a.result?($("#div-carro-canasta").html(a.response.canastaHTML),$("#div-carro-canasta").trigger("create"),a.response.mensajeHTML&&(dialogoAnimado(a.response.mensajeHTML),$("#cantidad-productos").html(a.response.objetosCarro)),a.response.dialogoHTML&&alert(a.response.dialogoHTML)):alert(a.response)},error:function(a,o,t){alert("Error: "+t)}}),!1}),$(document).on("click","a[data-cargar='1']",function(){var a=$(this).attr("data-producto"),o=$(this).attr("data-id"),t=$("#cantidad-producto-unidad-"+a+"-"+o).val();t=parseInt(t),isNaN(t)&&(t=-1);var r=parseInt($("#cantidad-producto-fraccion-"+a+"-"+o).val());return r=parseInt(r),isNaN(r)&&(r=-1),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/agregar",data:{producto:a,cantidadU:t,cantidadF:r},beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(o){"ok"===o.result?($("#div-carro-canasta").html(o.response.canastaHTML),$("#div-carro-canasta").trigger("create"),o.response.mensajeHTML&&(dialogoAnimado(o.response.mensajeHTML),$("#icono-producto-agregado-"+a).addClass("active"),$("#cantidad-productos").html(o.response.objetosCarro)),o.response.dialogoHTML&&($("#modalBodegas").remove(),$("body").append(o.response.dialogoHTML),$("#modalBodegas").modal("show"))):alert(o.response)},error:function(a,o,t){alert("Error: "+t)}}),!1}),$(document).on("click","a[data-cargar='3']",function(){var a=$(this).attr("data-producto"),o=$("#cantidad-producto-ubicacion-"+a).val();o=parseInt(o),isNaN(o)&&(o=0);var t=parseInt($("#cantidad-producto-bodega-"+a).val());return t=parseInt(t),isNaN(t)&&(t=0),$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/carro/agregarBodega",data:{producto:a,cantidadU:o,cantidadB:t},beforeSend:function(){Loading.show()},complete:function(a){Loading.hide()},success:function(a){"ok"===a.result?($("#div-carro-canasta").html(a.response.canastaHTML),$("#div-carro-canasta").trigger("create"),a.response.mensajeHTML&&(dialogoAnimado(a.response.mensajeHTML),$("#cantidad-productos").html(a.response.objetosCarro)),a.response.dialogoHTML&&alert(a.response.dialogoHTML)):alert(a.response)},error:function(a,o,t){alert("Error: "+t)}}),!1}),$(document).on("click","#form-autenticar input[data-registro-desktop='autenticar']",function(){var a=$(this).parents("form"),o=$(this);return $.ajax({type:"POST",async:!0,url:requestUrl+"/usuario/ingresar",data:a.serialize(),beforeSend:function(){Loading.show()},complete:function(a){Loading.hide()},success:function(o){var t=$.parseJSON(o);"ok"===t.result?window.location.replace(t.response.redirect):"error"===t.result||$.each(t,function(o,t){$("#"+a.attr("id")+" #"+o+"_em_").html(t),$("#"+a.attr("id")+" #"+o+"_em_").css("display","block")})},error:function(a,t,r){o.button("enable"),alert("Error: "+r)}}),!1}),$(document).on("click","#form-registro input[data-registro-desktop='registro']",function(){var a=$(this).parents("form");$(this);return $.ajax({type:"POST",async:!0,url:requestUrl+"/usuario/registro",data:a.serialize(),beforeSend:function(){Loading.show()},complete:function(a){Loading.hide()},success:function(o){var t=$.parseJSON(o);"ok"===t.result?($("#main-content").html(t.response.bienvenidaHTML),$("#main-content").trigger("create")):"error"===t.result||$.each(t,function(o,t){$("#"+a.attr("id")+" #"+o+"_em_").html(t),$("#"+a.attr("id")+" #"+o+"_em_").css("display","block")})},error:function(a,o,t){alert("Error: "+t)}}),!1}),$(document).on("click","#form-registro input[data-registro-desktop='recordar']",function(){var a=$(this).parents("form");$(this);return $.ajax({type:"POST",async:!0,url:requestUrl+"/usuario/registro",data:a.serialize(),beforeSend:function(){Loading.show()},complete:function(a){Loading.hide()},success:function(o){var t=$.parseJSON(o);"ok"===t.result?$("#main-page").html(t.response.bienvenidaHTML):"error"===t.result?alert(t.response):$.each(t,function(o,t){$("#"+a.attr("id")+" #"+o+"_em_").html(t),$("#"+a.attr("id")+" #"+o+"_em_").css("display","block")})},error:function(a,o,t){Loading.hide(),alert("Error: "+t)}}),!1}),$(document).on("click","#form-recordar input[data-registro-desktop='recordar']",function(){var a=$(this).parents("form"),o=$(this);return $.ajax({type:"POST",async:!0,url:requestUrl+"/usuario/recordar",data:a.serialize(),beforeSend:function(){Loading.show()},complete:function(a){Loading.hide()},success:function(o){var t=$.parseJSON(o);"ok"===t.result?(a.trigger("reset"),alert(t.response)):"error"===t.result?alert(t.response):$.each(t,function(o,t){$("#"+a.attr("id")+" #"+o+"_em_").html(t),$("#"+a.attr("id")+" #"+o+"_em_").css("display","block")})},error:function(a,t,r){o.button("enable"),alert("Error: "+r)}}),!1}),$(document).on("click","a[data-role='comparar']",function(){var a=$(this).attr("data-producto");return $.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/catalogo/agregarProductoComparar",data:{producto:a},beforeSend:function(){Loading.show()},complete:function(a){Loading.hide()},success:function(a){"ok"===a.result&&($("#cantidad-productos-comparar").html(a.productos),a.productos>=a.maximoComparar?$(".btnComparar").css("display","none"):$(".btnComparar").css("display","block"))},error:function(a,o,t){alert("Error: "+t)}}),!1}),$(document).on("click","a[data-role='quitarComparar']",function(){var a=$(this).attr("data-producto");$.ajax({type:"POST",dataType:"json",async:!0,url:requestUrl+"/catalogo/quitarProductoComparar",data:{producto:a},beforeSend:function(){Loading.show()},complete:function(a){Loading.hide()},success:function(o){"ok"===o.result&&($("#cantidad-productos-comparar").html(o.productos),$("#comparacion-producto-"+a).css("display","none"),o.productos>=o.maximoComparar?$(".btnComparar").css("display","none"):$(".btnComparar").css("display","block"))},error:function(a,o,t){alert("Error: "+t)}})}),$(document).on("click","a[data-registro-desktop='autenticar']",function(){$(this).parents("form"),$(this)}),$(document).on("click","a[data-role='compararProductos']",function(){return $.ajax({type:"GET",async:!0,url:requestUrl+"/catalogo/verProductosComparar",beforeSend:function(){Loading.show(),$("#modal-comparar-productos").remove()},complete:function(){Loading.hide()},success:function(a){$("#main-page").append(a),$("#modal-comparar-productos").modal("show")},error:function(a,o,t){alert(o+"")}}),!1}),$(document).on("click","button[data-role='disminuir-cantidad']",function(){var a=$(this).attr("data-producto"),o=$(this).attr("data-id"),t=$(this).attr("data-precio"),r=$("#cantidad-producto-unidad-"+a+"-"+o).val();r--,0>r&&(r=0),$("#subtotal-producto-unidad-"+a).html("$"+format(r*t)),$("#cantidad-producto-unidad-"+a+"-"+o).val(r)}),$(document).on("change","input[data-role='validar-cantidad-unidad']",function(){var a=$(this).attr("data-producto"),o=$(this).attr("data-precio"),t=$(this).attr("data-id"),r=$(this).val();0>r&&(r=0),$("#subtotal-producto-unidad-"+a).html("$"+format(r*o)),$("#cantidad-producto-unidad-"+a+"-"+t).val(r)}),$(document).on("click","button[data-role='aumentar-cantidad']",function(){var a=$(this).attr("data-producto"),o=$(this).attr("data-precio"),t=$(this).attr("data-id"),r=$("#cantidad-producto-unidad-"+a+"-"+t).val();r++,0>r&&(r=0),$("#subtotal-producto-unidad-"+a).html("$"+format(r*o)),$("#cantidad-producto-unidad-"+a+"-"+t).val(r)}),$(document).on("click","button[data-role='guardarCalificacion']",function(){var a=$(this).attr("data-producto"),o=$("#form-calificacion");$.ajax({type:"POST",url:requestUrl+"/catalogo/calificar/",data:"codigo="+a+"&"+o.serialize(),dataType:"json",beforeSend:function(){Loading.show()},complete:function(a){Loading.hide()},success:function(a){"ok"===a.result?($("[data-role='calificacion']").remove(),$("#calificacion-producto").html("<div class='col-md-6'>TU COMENTARIO HA SIDO PUBLICADO, ESTE SERÃ APROBADO POR UN MODERADOR EN LAS PRÃXIMAS HORAS</div>")):"error"===a.result?($("#dialog").html(a.response),$("#dialog").dialog("open")):$.each(a,function(a,t){$("#"+o.attr("id")+" #"+a+"_em_").html(t),$("#"+o.attr("id")+" #"+a+"_em_").css("display","block")})}})});