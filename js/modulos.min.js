function cargarCategoriasSeleccionadas(o){var e="";$('input[name="marcas-contenido[]"]:checked').each(function(o){0!=o&&(e+=","),e+=$(this).val()}),idModulo=o,$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/contenido/obtenerlistacategorias",data:{idMarcas:e,idModulo:idModulo},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?$("#categorias-marcas-seleccionadas").html(o.response.htmlCategorias):"error"===o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){Loading.hide()}})}$(document).on("change","select[data-role='modulo-ciudad']",function(){var o=$("#select-ciudad-modulo").val();$.ajax({type:"GET",async:!0,url:requestUrl+"/callcenter/contenido/comprobarciudad",data:{codigoCiudad:o},beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(o){var o=$.parseJSON(o);"ok"===o.result&&(1==o.code?($("#div-sector-modulo").html(o.htmlResponse),$("#div-sector-modulo").css("display","block"),$("#sector-select").val(1)):2==o.code&&($("#div-sector-modulo").css("display","none"),$("#sector-select").val(0)))},error:function(o,e,a){}})}),$(document).on("click","button[data-role='add-sector-ciudad']",function(){var o=$("#select-ciudad-modulo").val(),e=$("#sector-modulo").val(),a=$(this).attr("data-modulo");0==$("#sector-select").val()&&(e=0),$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/contenido/guardarCiudadSector",data:{codigoCiudad:o,codigoSector:e,idModulo:a},dataType:"json",beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(o){"ok"==o.result?(bootbox.alert("Ciudad/Sector adicionado con éxito"),$("#lista-sectores").html(o.response)):"error"==o.result&&bootbox.alert(o.response)},error:function(o,e,a){}})}),$(document).on("click","a[data-role='eliminar-sector-modulo']",function(){var o=$(this).attr("data-modulo-sector");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/contenido/eliminarCiudadSector",data:{idModuloSectorCiudad:o},dataType:"json",beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(o){"ok"==o.result?(bootbox.alert("Ciudad/Sector eliminado con éxito"),$("#lista-sectores").html(o.response)):"error"==o.result&&bootbox.alert(o.response)},error:function(o,e,a){}})}),$(document).on("change","select[data-role='ubicacion-modulo']",function(){var o=$("#UbicacionModulos_ubicacion").val();$.ajax({type:"GET",async:!0,url:requestUrl+"/callcenter/contenido/formUbicacionCategoria",data:{ubicacion:o},beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?($("#ubicacion-categoria").html(o.response),$("#ubicacion-categoria").css("display","block")):$("#ubicacion-categoria").css("display","none")},error:function(o,e,a){}})}),$(document).on("click","a[data-role='eliminar-modulo-ubicacion']",function(){var o=$(this).attr("data-modulo-ubicacion");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/contenido/eliminarUbicacion",data:{ubicacion:o},beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(o){var o=$.parseJSON(o);"ok"==o.result?(bootbox.alert("Ubicación eliminada con éxito"),$("#lista-ubicaciones").html(o.response)):"error"==o.result&&bootbox.alert(o.response)},error:function(o,e,a){}})}),$(document).on("change","select[data-role='validar-contenido']",function(){var o=$("#ImagenBanner_tipoContenido").val();$.ajax({type:"GET",async:!0,url:requestUrl+"/callcenter/contenido/formContenidoImagen",data:{tipoContenido:o},beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(o){var o=$.parseJSON(o);"ok"===o.result&&(1===o.response?$("#div-contenido-imagen").css("display","block"):$("#div-contenido-imagen").css("display","none"))},error:function(o,e,a){}})}),$(document).on("change","select[data-role='validar-editar-contenido']",function(){var o=$(this).val();$.ajax({type:"GET",async:!0,url:requestUrl+"/callcenter/contenido/formContenidoImagen",data:{tipoContenido:o},beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(o){var o=$.parseJSON(o);"ok"===o.result&&(1===o.response?$("#div-contenido-imagen-editar").css("display","block"):$("#div-contenido-imagen-editar").css("display","none"))},error:function(o,e,a){}})}),$(document).on("click","a[data-role='modal-contenido']",function(){var o=$(this).attr("data-contenido-modal");$("#pre-contenido-modal").html(o),$("#modal-contenido-visual").modal("show")}),$(document).on("click","a[data-role='eliminar-modulo-imagen']",function(){var o=$(this).attr("data-modulo-imagen");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/contenido/eliminarImagen",data:{idBanner:o},beforeSend:function(){},success:function(o){var o=$.parseJSON(o);"ok"==o.result?(bootbox.alert("Imagen eliminada con éxito"),$("#lista-imagenes").html(o.response)):"error"==o.result&&bootbox.alert(o.response)},complete:function(){},error:function(o,e,a){}})}),$(document).on("click","a[data-role='modal-editar-imagen']",function(){var o=$(this).attr("data-modulo-imagen");$.ajax({type:"GET",async:!0,url:requestUrl+"/callcenter/contenido/editarImagen",data:{idBanner:o},beforeSend:function(){Loading.show(),$("#modal-editar-imagen").remove()},complete:function(o){Loading.hide()},success:function(o){var o=$.parseJSON(o);"ok"==o.result?($("#container").append(o.response),$("#modal-editar-imagen").modal("show")):"error"==o.result&&bootbox.alert(o.response)},error:function(o,e,a){}})}),$(document).on("click","a[data-role='guardar-editar-imagen']",function(){var o=$(this).attr("data-banner"),e=$("#form-editar-imagen");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/contenido/guardarEditarImagen",data:e.serialize()+"&idBanner="+o,beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(o){var o=$.parseJSON(o);"ok"==o.result?(bootbox.alert("Contenido actualizado"),$("#lista-imagenes").html(o.responseHtml),$("#modal-editar-imagen").modal("hide")):"error"==o.result?bootbox.alert(o.response):$.each(o,function(o,a){$("#"+e.attr("id")+" #"+o+"_em_").html(a),$("#"+e.attr("id")+" #"+o+"_em_").css("display","block")})},error:function(o,e,a){}})}),$(document).on("click","a[data-role='agregar-modulo-grupo']",function(){var o=$("#idGrupoModulo").val(),e=$(this).attr("data-idModulo"),a=$(this).attr("data-accion"),t=$("#orden_"+e).val();$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/contenido/configurarModuloGrupo",data:{idModuloGrupo:o,idModulo:e,accion:a,orden:t},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"==o.result?($.fn.yiiGridView.update("grid-modulos"),$("#grid-modulos-adicionados").html(o.response)):"error"==o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){}})}),$(document).on("click","a[data-role='modulo-visualizar']",function(){var o=$(this).attr("data-modulo");$.ajax({type:"GET",async:!0,url:requestUrl+"/callcenter/contenido/visualizarModulo",data:{idModulo:o},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"==o.result?($("#modal-previsualizar").remove(),$("#container").append(o.response),$(".slide-productos").owlCarousel({items:4,lazyLoad:!0,navigation:!0,pagination:!1,navigationText:["<i class='glyphicon glyphicon-chevron-left'></i>","<i class='glyphicon glyphicon-chevron-right'></i>"]}),$("#modal-previsualizar").modal("show")):"error"==o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){}})}),$(document).on("click","a[data-role='crear-categoria']",function(){var o=$(this).attr("data-dispositivo"),e=$(this).attr("data-nivel"),a=$(this).attr("data-categoria-raiz"),t=$(this).attr("data-categoria-padre");$.ajax({type:"GET",async:!0,url:requestUrl+"/callcenter/categoria/crearCategoria",data:{dispositivo:o,nivel:e,idCategoriaRaiz:a,idCategoriaPadre:t},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"==o.result?($("#modal-categoria").remove(),$("#content").append(o.response),$("#modal-categoria").modal("show")):"error"==o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){}})}),$(document).on("click","a[data-role='guardar-categoria']",function(){var o=$(this).attr("data-dispositivo"),e=$(this).attr("data-categoria-raiz"),a=$(this).attr("data-categoria-padre"),t=document.getElementById("form-categoria"),r=document.createElement("input");r.type="hidden",r.value=o,r.name="dispositivo",r.id="dispositivo",t.appendChild(r);var n=document.createElement("input");n.type="hidden",n.value=e,n.name="idCategoriaRaiz",n.id="idCategoriaRaiz",t.appendChild(n);var i=document.createElement("input");i.type="hidden",i.value=a,i.name="idCategoriaPadre",i.id="idCategoriaPadre",t.appendChild(i);var c=document.createElement("input");c.type="hidden",c.value="crear",c.name="scenario",c.id="scenario",t.appendChild(c),$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/categoria/guardarCategoria",data:new FormData(t),cache:!1,contentType:!1,processData:!1,beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"==o.result?($("#div-categorias-tienda").html(o.response),$("#modal-categoria").modal("hide")):"error"==o.result?bootbox.alert(o.response):$.each(o,function(o,e){$("#"+form.attr("id")+" #"+o+"_em_").html(e),$("#"+form.attr("id")+" #"+o+"_em_").css("display","block")})},complete:function(){Loading.hide()},error:function(o,e,a){}})}),$(document).on("click","a[data-role='editar-categoria']",function(){var o=$(this).attr("data-dispositivo"),e=$(this).attr("data-categoria"),a=$(this).attr("data-categoria-raiz"),t=$(this).attr("data-categoria-padre"),r=$(this).attr("data-nivel");$.ajax({type:"GET",async:!0,url:requestUrl+"/callcenter/categoria/editarCategoria",data:{dispositivo:o,nivel:r,idCategoriaRaiz:a,idCategoriaPadre:t,idCategoria:e},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"==o.result?($("#modal-categoria").remove(),$("#content").append(o.response),$("#modal-categoria").modal("show")):"error"==o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){}})}),$(document).on("click","a[data-role='actualizar-categoria']",function(){var o=$("#form-categoria"),e=$(this).attr("data-dispositivo"),a=$(this).attr("data-categoria-raiz"),t=$(this).attr("data-categoria-padre"),r=$(this).attr("data-categoria"),n=new FormData(document.getElementById("form-categoria")),n=document.getElementById("form-categoria"),i=document.createElement("input");i.type="hidden",i.value=e,i.name="dispositivo",i.id="dispositivo",n.appendChild(i);var c=document.createElement("input");c.type="hidden",c.value=a,c.name="idCategoriaRaiz",c.id="idCategoriaRaiz",n.appendChild(c);var d=document.createElement("input");d.type="hidden",d.value=t,d.name="idCategoriaPadre",d.id="idCategoriaPadre",n.appendChild(d);var s=document.createElement("input");s.type="hidden",s.value="actualizar",s.name="scenario",s.id="scenario",n.appendChild(s);var l=document.createElement("input");l.type="hidden",l.value=r,l.name="idCategoria",l.id="idCategoria",n.appendChild(l),$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/categoria/guardarCategoria",data:new FormData(n),cache:!1,contentType:!1,processData:!1,beforeSend:function(){Loading.show()},success:function(e){var e=$.parseJSON(e);"ok"==e.result?($("#div-categorias-tienda").html(e.response),$("#modal-categoria").modal("hide")):"error"==e.result?bootbox.alert(e.response):$.each(e,function(e,a){$("#"+o.attr("id")+" #"+e+"_em_").html(a),$("#"+o.attr("id")+" #"+e+"_em_").css("display","block")})},complete:function(){Loading.hide()},error:function(o,e,a){}})}),$(document).on("click","a[data-role='asociar-categorias']",function(){var o=$(this).attr("data-categoria"),e=$(this).attr("data-dispositivo");$.ajax({type:"GET",async:!0,url:requestUrl+"/callcenter/categoria/asociarCategorias",data:{idCategoria:o,tipoDispositivo:e},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"==o.result?($("#modal-categoria-asociacion").remove(),$("#content").append(o.response),$("#modal-categoria-asociacion").modal("show")):"error"==o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){}})}),$(document).on("click","a[data-role='add-categoria-bi']",function(){var o=$(this).attr("data-categoria"),e=$(this).attr("data-categoria-bi"),a=$(this).attr("data-dispositivo");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/categoria/agregarAsociacionCategoria",data:{idCategoria:o,idCategoriaBi:e,tipoDispositivo:a},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"==o.result?($("#btn-"+e).html("Añadido"),$("#div-categorias-tienda").html(o.responseHtml)):"error"==o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){}})}),$(document).on("click","a[data-role='eliminar-categoria-bi']",function(){var o=$(this).attr("data-categoria"),e=$(this).attr("data-categoria-bi"),a=$(this).attr("data-dispositivo");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/categoria/eliminarAsociacionCategoria",data:{idCategoria:o,idCategoriaBi:e,tipoDispositivo:a},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"==o.result?$("#visible-categoria-bi-"+e).css("display","none"):"error"==o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){}})}),$(document).on("click","button[data-role='busqueda-producto-combo']",function(){var o=$.trim($("#combo-busqueda-buscar").val());if(o){var e=$(this).attr("data-combo");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/combo/buscarproductos",data:{busqueda:o,idCombo:e},beforeSend:function(){$("#modal-productos-busqueda-combo").remove(),Loading.show()},success:function(o){$("#container").append(o),$("#modal-productos-busqueda-combo").modal("show")},complete:function(){Loading.hide()},error:function(o,e,a){Loading.hide(),bootbox.alert("Error: "+o.responseText)}})}else bootbox.alert("Búsqueda no puede estar vacío")}),$(document).on("click","a[data-role='agregar-producto-combo']",function(){var o=$(this).attr("data-producto"),e=$(this).attr("data-combo"),a=$("#precio_"+o).val(),t=$(this);$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/combo/agregarproductocombo",data:{producto:o,idCombo:e,precio:a},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?($("#contenido-productos-lista").html(o.response.htmlProductosAgregados),t.attr("disabled",!0),t.html("Agregado")):"error"===o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){Loading.hide()}})}),$(document).on("click","a[data-role='eliminar-producto-combo']",function(){var o=$(this).attr("data-combo-producto"),e=$(this).attr("data-combo");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/combo/eliminarproductocombo",data:{idComboProducto:o,idCombo:e},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?$("#contenido-productos-lista").html(o.response.htmlProductosAgregados):"error"===o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){Loading.hide()}})}),$(document).on("click","button[data-role='add-sector-ciudad-combo']",function(){var o=$("#select-ciudad-modulo").val(),e=$("#sector-modulo").val(),a=$("#cantidades-combo").val(),t=$(this).attr("data-combo");0==$("#sector-select").val()&&(e=0),$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/combo/guardarCiudadSector",data:{codigoCiudad:o,codigoSector:e,idCombo:t,saldo:a},dataType:"json",beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(o){"ok"==o.result?(bootbox.alert("Ciudad/Sector adicionado con éxito"),$("#lista-sectores").html(o.response)):"error"==o.result&&bootbox.alert(o.response)},error:function(o,e,a){}})}),$(document).on("click","a[data-role='eliminar-combo-sector']",function(){var o=$(this).attr("data-combo"),e=$(this).attr("data-sector"),a=$(this).attr("data-ciudad");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/combo/eliminarCiudadSector",data:{idCombo:o,codigoSector:e,codigoCiudad:a},dataType:"json",beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(o){"ok"==o.result?(bootbox.alert("Ciudad/Sector eliminado con éxito"),$("#lista-sectores").html(o.response)):"error"==o.result&&bootbox.alert(o.response)},error:function(o,e,a){}})}),$(document).on("click","a[data-role='eliminar-imagen-combo']",function(){var o=$(this).attr("data-imagen-combo");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/combo/eliminarImagenCombo",data:{imagenCombo:o},dataType:"json",beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(o){"ok"==o.result?(bootbox.alert("Imagen Eliminada con éxito"),$("#lista-imagenes").html(o.response)):"error"==o.result&&bootbox.alert(o.response)},error:function(o,e,a){}})}),$(document).on("click","a[data-role='estado-imagen-combo']",function(){var o=$(this).attr("data-imagen-combo");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/combo/estadoImagenCombo",data:{imagenCombo:o},dataType:"json",beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(o){"ok"==o.result?(bootbox.alert("El cambio se efectuó con éxito"),$("#lista-imagenes").html(o.response)):"error"==o.result&&bootbox.alert(o.response)},error:function(o,e,a){}})}),$(document).on("change","select[data-role='aleatorio']",function(){var o=$(this).val();0==o?($("#lineas").val(""),$("#lineas").prop("disabled",!0)):$("#lineas").prop("disabled",!1)}),$(document).on("change","select[data-role='validar-tipo-combo']",function(){var o=$(this).val();$.ajax({type:"GET",async:!0,url:requestUrl+"/callcenter/combo/validarComboBeneficio",data:{valor:o},dataType:"json",beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(o){"ok"==o.result?"true"==o.response?($("#Combo_fechaInicio").prop("disabled",!0),$("#Combo_fechaFin").prop("disabled",!0),$("#beneficio-combo").css("display","block")):($("#Combo_fechaInicio").prop("disabled",!1),$("#Combo_fechaFin").prop("disabled",!1),$("#beneficio-combo").css("display","none")):"error"==o.result&&bootbox.alert(o.response)},error:function(o,e,a){}})}),$(document).on("click","a[data-role='activar-bono']",function(){var o=$(this).attr("data-identificacion"),e=$(this).attr("data-valor"),a=$("#comentario").val();$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/admin/actualizarBono",data:{identificacion:o,comentario:a,valor:e},dataType:"json",beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(o){if("ok"==o.result)$("#result_bono").html(o.response);else if("error"==o.result)bootbox.alert(o.response);else{var e="";$.each(o,function(o,a){e+=a+"\n"}),bootbox.alert(e)}},error:function(o,e,a){}})}),$(document).on("click","a[data-role='add-beneficio']",function(){var o=$(this).attr("data-beneficio"),e=$(this).attr("data-tipo");return $.ajax({type:"GET",async:!0,url:requestUrl+"/callcenter/combo/informacioBeneficio",data:{idBeneficio:o},dataType:"json",beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(a){"ok"==a.result?($("#descripcion-combo").html(a.descripcion),$("#Combo_fechaInicio").val(a.fechaInicio),$("#Combo_fechaFin").val(a.fechaFin),$("#Combo_tipoBeneficio").val(e),$("#Combo_idBeneficio").val(o),$("#modal-beneficios-combo").modal("hide")):"error"==a.result&&bootbox.alert(a.response)},error:function(o,e,a){}}),!1}),$(document).on("click","a[data-role='eliminar-todos-productos']",function(){var o=$(this).attr("data-modulo");return bootbox.dialog({message:"¿Está seguro de eliminar todos los productos?",title:"Eliminar todo",buttons:{success:{label:"Aceptar",className:"btn-primary",callback:function(){$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/contenido/eliminartodosProductos",data:{idModulo:o},dataType:"json",beforeSend:function(){Loading.show()},complete:function(o){Loading.hide()},success:function(o){"ok"===o.result?$("#contenido-productos-lista").html(o.response.htmlProductosAgregados):"error"===o.result&&bootbox.alert(o.response)},error:function(o,e,a){Loading.hide()}})}},close:{label:"Cancelar",className:"btn-default",callback:function(){}}}}),!1}),$(document).on("click",'a[data-role="modulo-eliminar"]',function(){var o=$(this).attr("data-modulo");bootbox.dialog({message:"Está seguro de eliminar el módulo",title:"Eliminar Módulo",buttons:{success:{label:"Aceptar",className:"btn-primary",callback:function(){$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/contenido/eliminarmodulo",data:{idModulo:o},beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?$.fn.yiiGridView.update("grid-modulos"):"error"===o.result&&bootbox.alert(o.response)},error:function(o,e,a){Loading.hide(),bootbox.alert("Error: "+a)}})}},close:{label:"Cancelar",className:"btn-default",callback:function(){}}}})}),$(document).on("click","button[data-role='busqueda-contenido']",function(){var o=$.trim($("#contenido-busqueda-buscar").val());if(o){var e=$(this).attr("data-modulo");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/contenido/buscarproductos",data:{busqueda:o,idModulo:e},beforeSend:function(){$("#modal-productos-busqueda").remove(),Loading.show()},success:function(o){$("#container").append(o),$("#modal-productos-busqueda").modal("show")},complete:function(){Loading.hide()},error:function(o,e,a){Loading.hide(),bootbox.alert("Error: "+o.responseText)}})}else bootbox.alert("Búsqueda no puede estar vacío")}),$(document).on("keypress","#contenido-busqueda-buscar",function(o){13==o.keyCode&&($("button[data-role='busqueda-contenido']").trigger("click"),o.preventDefault())}),$(document).on("click","a[data-role='agregar-producto-contenido']",function(){var o=$(this).attr("data-producto"),e=$(this).attr("data-modulo"),a=$(this);$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/contenido/agregarproductomodulo",data:{producto:o,idModulo:e},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?($("#contenido-productos-lista").html(o.response.htmlProductosAgregados),a.attr("disabled",!0),a.html("Agregado")):"error"===o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){Loading.hide()}})}),$(document).on("click","a[data-role='eliminar-producto-contenido']",function(){var o=$(this).attr("data-producto");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/contenido/eliminarproductomodulo",data:{idProductoModulo:o},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?$("#contenido-productos-lista").html(o.response.htmlProductosAgregados):"error"===o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){Loading.hide()}})}),$(document).on("click",'input[name="marcas-contenido[]"]:checkbox',function(o){cargarCategoriasSeleccionadas($(this).attr("data-modulo"))}),$(document).on("click","input[data-role='almacenar-html-producto-marcas']",function(){var o=$(this).attr("data-modulo"),e="",a="agregarmarcascategorias",t="",r="";$("#ModulosConfigurados_contenido").length&&(e=$("#ModulosConfigurados_contenido").val(),a="contenidohtmlproductos"),$('input[name="marcas-contenido[]"]:checked').each(function(o){0!=o&&(t+=","),t+=$(this).val()}),$('input[name="categorias-contenido[]"]:checked').each(function(o){0!=o&&(r+=","),r+=$(this).val()}),$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/contenido/"+a,data:{idModulo:o,htmlModulo:e,idMarcas:t,idCategorias:r},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?window.location.reload():"error"===o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){Loading.hide(),bootbox.alert("Error: "+a)}})}),$(document).on("click","button[data-role='cargar-productos-contenido']",function(){var o=document.getElementById("cargarproducto"),e=document.createElement("input");e.type="hidden",e.value=$(this).attr("data-modulo"),e.name="idModulo",e.id="idModulo",o.appendChild(e);var a=new FormData(o);return""!=$("#contenido-cargar-producto").val()?$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/contenido/cargarplanoproductos",data:a,cache:!1,contentType:!1,processData:!1,beforeSend:function(){Loading.show()},complete:function(){o.removeChild(e),Loading.hide()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?($("#contenido-productos-lista").html(o.response.htmlProductosAgregados),$("#contenido-cargar-producto").val("")):"error"===o.result&&bootbox.alert(o.response)},error:function(o,e,a){Loading.hide(),bootbox.alert("Error: "+a)}}):bootbox.alert("Debe seleccionar un archivo en formato txt"),!1}),$(document).on("click",'a[data-role="modulo-inactivar"]',function(){var o=$(this).attr("data-modulo");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/contenido/activardesactivarmodulo",data:{idModulo:o},beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?$.fn.yiiGridView.update("grid-modulos"):"error"===o.result&&bootbox.alert(o.response)},error:function(o,e,a){Loading.hide(),bootbox.alert("Error: "+a)}})}),$(document).on("click","button[data-role='busqueda-relacionados']",function(){var o=$.trim($("#relacionados-busqueda-buscar").val());if(o){var e=$(this).attr("data-producto");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/productosRelacionados/buscarproductos",data:{busqueda:o,codigoProducto:e},beforeSend:function(){$("#modal-productos-busqueda").remove(),Loading.show()},success:function(o){$("#container").append(o),$("#modal-productos-busqueda").modal("show")},complete:function(){Loading.hide()},error:function(o,e,a){Loading.hide(),bootbox.alert("Error: "+o.responseText)}})}else bootbox.alert("Búsqueda no puede estar vacío")}),$(document).on("keypress","#relacionados-busqueda-buscar",function(o){13==o.keyCode&&($("button[data-role='busqueda-relacionados']").trigger("click"),o.preventDefault())}),$(document).on("click","a[data-role='agregar-producto-relacionado']",function(){var o=$(this).attr("data-relacionado"),e=$(this).attr("data-producto"),a=$(this);$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/productosRelacionados/agregarproductorelacionado",data:{producto:e,productoRelacionado:o},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?($("#productos-relacionados-lista").html(o.response.htmlProductosAgregados),a.attr("disabled",!0),a.html("Relacionado")):"error"===o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){Loading.hide()}})}),$(document).on("click","a[data-role='eliminar-producto-relacionado']",function(){var o=$(this).attr("data-relacion");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/productosRelacionados/eliminarproductorelacionado",data:{idRelacionado:o},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?$("#productos-relacionados-lista").html(o.response.htmlProductosAgregados):"error"===o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){Loading.hide()}})}),$(document).on("click","a[data-role='actualizar-producto-relacionado']",function(){var o=$(this).attr("data-relacion"),e=$("#orden_"+o).val();$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/productosRelacionados/actualizarproductorelacionado",data:{idRelacionado:o,orden:e},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?$("#productos-relacionados-lista").html(o.response.htmlProductosAgregados):"error"===o.result&&bootbox.alert(o.response)},complete:function(){Loading.hide()},error:function(o,e,a){Loading.hide()}})}),$(document).on("click","a[data-role='tarifa-domicilio']",function(){var o=$(this).attr("data-tarifa");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/tarifaDomicilio/tarifadomicilio",data:{idDomicilio:o},beforeSend:function(){$("#modal-tarifas-domicilio").remove(),Loading.show()},success:function(o){var o=$.parseJSON(o);$("#container").append(o.response.htmlTarifa),$("#modal-tarifas-domicilio").modal("show")},complete:function(){Loading.hide()},error:function(o,e,a){Loading.hide(),bootbox.alert("Error: "+o.responseText)}})}),$(document).on("change","select[data-role='select-ciudades-domicilio']",function(){var o=$(this).val();$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/tarifaDomicilio/comprobarciudad",data:{codigoCiudad:o},beforeSend:function(){Loading.show()},success:function(o){var o=$.parseJSON(o);"ok"===o.result&&$("#listaSectoresTarifas").html(o.response.htmlSector)},complete:function(){Loading.hide()},error:function(o,e,a){Loading.hide(),bootbox.alert("Error: "+o.responseText)}})}),$(document).on("click","button[data-role='guardar-tarifa-domicilio']",function(){var o=$("#tarifa-domicilio-form");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/tarifaDomicilio/agregartarifadomicilio",data:o.serialize(),beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(e){var e=$.parseJSON(e);"ok"===e.result?($("#modal-tarifas-domicilio").modal("hide"),$.fn.yiiGridView.update("grid-tarifas-domicilios")):"error"===e.result?bootbox.alert(e.response):$.each(e,function(e,a){$("#"+o.attr("id")+" #"+e+"_em_").html(a),$("#"+o.attr("id")+" #"+e+"_em_").css("display","block")})},error:function(o,e,a){Loading.hide(),bootbox.alert("Error: "+a)}})}),$(document).on("click","a[data-role='eliminar-tarifa-domicilio']",function(){var o=$(this).attr("data-tarifa");$.ajax({type:"POST",async:!0,url:requestUrl+"/callcenter/tarifaDomicilio/eliminartarifadomicilio",data:{idDomicilio:o},beforeSend:function(){Loading.show()},complete:function(){Loading.hide()},success:function(o){var o=$.parseJSON(o);"ok"===o.result?$.fn.yiiGridView.update("grid-tarifas-domicilios"):bootbox.alert(o.response)},error:function(o,e,a){Loading.hide(),bootbox.alert("Error: "+a)}})});